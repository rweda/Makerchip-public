<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
   <meta http-equiv="description" content="design.m4out.html">
   <meta http-equiv="keywords" content="tl-verilog">

   <title>design.m4out.tlv</title>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
   <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
   <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
   <script src="http://www.rweda.com/lib/sp_1.14-2022_10_10-beta-Pro/ide.js"></script>
   <link rel="stylesheet" href="http://www.rweda.com/lib/sp_1.14-2022_10_10-beta-Pro/ide.css" />

<style>
/*
Copyright (c) Redwood EDA, LLC
See accompanying LICENSE file for details.
*/
.tlv_ident_error {
  color: red;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_pipeline {
  color: orange;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_beh_hier_1 {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_beh_hier_2 {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_grouping {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_pipe_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_state_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sig_keyword {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_assigned_pipe_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_state_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_sig_keyword {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_pipe_reg {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_state_reg {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_assigned_reg_keyword {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_malformed_sig {
  color: purple;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_malformed_assigned_sig {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_malformed_assigned_reg {
  color: purple;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_when {
  color: #E04010;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sv_when {
  color: #E04010;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_phys_hier {
  color: blue;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_phys_beh_hier {
  color: #1090c0;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_stage_name {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_next_operator {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_incr_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_prev_operator {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_stage_decr_expr {
  color: #509050;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_alignment_expr_1ab {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_expr_1c {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_keyword_1c {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_ahead_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_behind_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_zero_expr {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_crosspipe_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_ahead_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_alignment_behind_name {
  color: #00D000;
  font-style: normal;
  font-weight: 600;
}
.tlv_ident_tlv_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_proj_rtl_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_misc_rtl_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_proj_attribute {
  color: #503890;
  font-style: italic;
  font-weight: normal;
}
.tlv_ident_sv_sig {
  color: #00008b;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_sv_datatype {
  color: DarkRed;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_keyword1 {
  color: Blue;
  font-style: normal;
  font-weight: normal;
}
.tlv_ident_comment {
  color: #808080;
  font-style: italic;
  font-weight: 600;
}
.tlv_ident_hdl_code {
  color: #00008b;
  font-style: normal;
  font-weight: normal;
}

</style>

</head>

<body>

<h2>design.m4out.tlv</h2>

<pre>
<span class="tlx_except_node_anchor no-select"><span class=tlx_except_container>                                                       <span class="tlx_except" sev="inform" title="This version of SandPiper can read this TL-X Version (1c),
but your version and license support TL-X 1d.
To up-rev this file to TL-X 1d use &quot;--scrub&quot;.">  </span></span></span><span class="line" line-num="1" source-line-num="1"><span class="tlv_ident_keyword1">\TLV_version 1c: tl-x.org</span></span>
<span class="line" line-num="2" source-line-num="2"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="3" source-line-num="3"><span class="tlv_ident_comment">/*</span></span>
<span class="line" line-num="4" source-line-num="4"><span class="tlv_ident_comment">Copyright (c) 2015, Steven F. Hoover</span></span>
<span class="line" line-num="5" source-line-num="5"></span>
<span class="line" line-num="6" source-line-num="6"><span class="tlv_ident_comment">Redistribution and use in source and binary forms, with or without</span></span>
<span class="line" line-num="7" source-line-num="7"><span class="tlv_ident_comment">modification, are permitted provided that the following conditions are met:</span></span>
<span class="line" line-num="8" source-line-num="8"></span>
<span class="line" line-num="9" source-line-num="9">    <span class="tlv_ident_comment">* Redistributions of source code must retain the above copyright notice,</span></span>
<span class="line" line-num="10" source-line-num="10">      <span class="tlv_ident_comment">this list of conditions and the following disclaimer.</span></span>
<span class="line" line-num="11" source-line-num="11">    <span class="tlv_ident_comment">* Redistributions in binary form must reproduce the above copyright</span></span>
<span class="line" line-num="12" source-line-num="12">      <span class="tlv_ident_comment">notice, this list of conditions and the following disclaimer in the</span></span>
<span class="line" line-num="13" source-line-num="13">      <span class="tlv_ident_comment">documentation and/or other materials provided with the distribution.</span></span>
<span class="line" line-num="14" source-line-num="14">    <span class="tlv_ident_comment">* The name of Steven F. Hoover</span></span>
<span class="line" line-num="15" source-line-num="15">      <span class="tlv_ident_comment">may not be used to endorse or promote products derived from this software</span></span>
<span class="line" line-num="16" source-line-num="16">      <span class="tlv_ident_comment">without specific prior written permission.</span></span>
<span class="line" line-num="17" source-line-num="17"></span>
<span class="line" line-num="18" source-line-num="18"><span class="tlv_ident_comment">THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span></span>
<span class="line" line-num="19" source-line-num="19"><span class="tlv_ident_comment">AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span></span>
<span class="line" line-num="20" source-line-num="20"><span class="tlv_ident_comment">IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE</span></span>
<span class="line" line-num="21" source-line-num="21"><span class="tlv_ident_comment">DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE</span></span>
<span class="line" line-num="22" source-line-num="22"><span class="tlv_ident_comment">FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL</span></span>
<span class="line" line-num="23" source-line-num="23"><span class="tlv_ident_comment">DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR</span></span>
<span class="line" line-num="24" source-line-num="24"><span class="tlv_ident_comment">SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span></span>
<span class="line" line-num="25" source-line-num="25"><span class="tlv_ident_comment">CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,</span></span>
<span class="line" line-num="26" source-line-num="26"><span class="tlv_ident_comment">OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE</span></span>
<span class="line" line-num="27" source-line-num="27"><span class="tlv_ident_comment">OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</span></span>
<span class="line" line-num="28" source-line-num="28"><span class="tlv_ident_comment">*/</span></span>
<span class="line" line-num="29" source-line-num="29"></span>
<span class="line" line-num="30" source-line-num="30"></span>
<span class="line" line-num="31" source-line-num="31"></span>
<span class="line" line-num="32" source-line-num="32"><span class="tlv_ident_comment">// This example implements an on-chip network, implemented as an X-Y-routed grid.</span></span>
<span class="line" line-num="33" source-line-num="33"><span class="tlv_ident_comment">// Each network tile has five bi-directional links: four neighboring tile grid-links</span></span>
<span class="line" line-num="34" source-line-num="34"><span class="tlv_ident_comment">// and its own endpoint link.  These are named: (X-1)-link, (X+1)-link, (Y-1)-link,</span></span>
<span class="line" line-num="35" source-line-num="35"><span class="tlv_ident_comment">// (Y+1)-link, and E-link, each with an i (input) and o (output) direction</span></span>
<span class="line" line-num="36" source-line-num="36"><span class="tlv_ident_comment">// (eg: (X-1)-olink is the outbound link to the X-1 tile; E-olink is out of network).</span></span>
<span class="line" line-num="37" source-line-num="37"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="38" source-line-num="38"><span class="tlv_ident_comment">// Packets contain multiple flits, where a flit occupies a single-cycle on a</span></span>
<span class="line" line-num="39" source-line-num="39"><span class="tlv_ident_comment">// link.  Idle flits may be injected at any time, between or within packets.</span></span>
<span class="line" line-num="40" source-line-num="40"><span class="tlv_ident_comment">// They will disappear</span></span>
<span class="line" line-num="41" source-line-num="41"><span class="tlv_ident_comment">// when queued, but will otherwise occupy slots when routed.  Packets should</span></span>
<span class="line" line-num="42" source-line-num="42"><span class="tlv_ident_comment">// generally be injected contiguously, with idles only in exceptional circumstances.</span></span>
<span class="line" line-num="43" source-line-num="43"><span class="tlv_ident_comment">// Packet size is determined only by a tail flit; there is no 'size' field in the</span></span>
<span class="line" line-num="44" source-line-num="44"><span class="tlv_ident_comment">// packet header.  Packets are routed contiguously and can block other traffic,</span></span>
<span class="line" line-num="45" source-line-num="45"><span class="tlv_ident_comment">// so large packets can introduce undesireable network characteristics.</span></span>
<span class="line" line-num="46" source-line-num="46"><span class="tlv_ident_comment">// Packetization can be done at a higher level to address this.</span></span>
<span class="line" line-num="47" source-line-num="47"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="48" source-line-num="48"><span class="tlv_ident_comment">// Network buffering is minimal.  However, when packets are blocked, the E-link can</span></span>
<span class="line" line-num="49" source-line-num="49"><span class="tlv_ident_comment">// be used to alleviate the congestion if the packet is &quot;unordered&quot; and if the</span></span>
<span class="line" line-num="50" source-line-num="50"><span class="tlv_ident_comment">// intermediate tile is able to absorb the packet (size needed?) and reinject it.</span></span>
<span class="line" line-num="51" source-line-num="51"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="52" source-line-num="52"><span class="tlv_ident_comment">// Virtual channels/lanes/networks are supported for protocol deadlock</span></span>
<span class="line" line-num="53" source-line-num="53"><span class="tlv_ident_comment">// avoidance, prioritization, and independence.  Each VC has a static</span></span>
<span class="line" line-num="54" source-line-num="54"><span class="tlv_ident_comment">// priority assigned.</span></span>
<span class="line" line-num="55" source-line-num="55"><span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="56" source-line-num="56"><span class="tlv_ident_comment">// Priority of traffic is as follows, highest to lowest.</span></span>
<span class="line" line-num="57" source-line-num="57"><span class="tlv_ident_comment">// On an outgoing network(X/Y)-olink:</span></span>
<span class="line" line-num="58" source-line-num="58"><span class="tlv_ident_comment">//   - The next flit following the previous one (non-tail, including idle).</span></span>
<span class="line" line-num="59" source-line-num="59"><span class="tlv_ident_comment">//   - Among queued non-head flits of the highest queued-traffic priority, or if</span></span>
<span class="line" line-num="60" source-line-num="60"><span class="tlv_ident_comment">//     none, head flits of the highest queued head flit priority, or if none,</span></span>
<span class="line" line-num="61" source-line-num="61"><span class="tlv_ident_comment">//     heads arriving this cycle:</span></span>
<span class="line" line-num="62" source-line-num="62"><span class="tlv_ident_comment">//     - Traffic continuing in a straight path.</span></span>
<span class="line" line-num="63" source-line-num="63"><span class="tlv_ident_comment">//     - Traffic taking a turn (Y-links only because of X-Y routing).</span></span>
<span class="line" line-num="64" source-line-num="64"><span class="tlv_ident_comment">//     - Traffic entering from the E-link.</span></span>
<span class="line" line-num="65" source-line-num="65"><span class="tlv_ident_comment">// On an E-ilink:</span></span>
<span class="line" line-num="66" source-line-num="66"><span class="tlv_ident_comment">//   - The next flit following the previous one (including idle).</span></span>
<span class="line" line-num="67" source-line-num="67"><span class="tlv_ident_comment">//   - The flit selected based on last cycle's head info using round-robin</span></span>
<span class="line" line-num="68" source-line-num="68"><span class="tlv_ident_comment">//     among heads waiting for this endpoint.  The head flit is dropped,</span></span>
<span class="line" line-num="69" source-line-num="69"><span class="tlv_ident_comment">//     so no cycle is lost.</span></span>
<span class="line" line-num="70" source-line-num="70"><span class="tlv_ident_comment">//   - </span></span>
<span class="line" line-num="71" source-line-num="71"><span class="tlv_ident_comment">// At each link </span></span>
<span class="line" line-num="72" source-line-num="72"></span>
<span class="line" line-num="73" source-line-num="73"><span class="tlv_ident_hdl_code">module grid_network(input logic clk, input logic reset, input logic [15:0] cyc_cnt, output logic passed, output logic failed);    </span><span class="tlv_ident_comment">/* verilator lint_off UNOPTFLAT */  </span><span class="tlv_ident_hdl_code">bit [256:0] RW_rand_raw; bit [256+63:0] RW_rand_vect; pseudo_rand #(.WIDTH(257)) pseudo_rand (clk, reset, RW_rand_raw[256:0]); assign RW_rand_vect[256+63:0] = {RW_rand_raw[62:0], RW_rand_raw};  </span><span class="tlv_ident_comment">/* verilator lint_on UNOPTFLAT */</span></span>
<span class="line" line-num="74" source-line-num="74"></span>
<span class="line" line-num="75" source-line-num="75"></span>
<span class="line" line-num="76" source-line-num="76"></span>
<span class="line" line-num="77" source-line-num="77"></span>
<span class="line" line-num="78" source-line-num="78"></span>
<span class="line" line-num="79" source-line-num="79"></span>
<span class="line" line-num="80" source-line-num="80"></span>
<span class="line" line-num="81" source-line-num="81"><span class="tlv_ident_keyword1">\TLV</span></span>
<span class="line" line-num="82" source-line-num="82">   <span class="tlv_ident_pipeline" logical_entity="|reset">|reset</span></span>
<span class="line" line-num="83" source-line-num="83">      <span class="tlv_ident_stage_expr" logical_entity="|reset@-2">@-1</span></span>
<span class="line" line-num="84" source-line-num="84">         <span class="tlv_ident_comment">// Create pipesignal out of reset module input.</span></span>
<span class="line" line-num="85" source-line-num="85">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|reset$reset"stage_in_phases="-2">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">reset;</span></span>
<span class="line" line-num="86" source-line-num="86"></span>
<span class="line" line-num="87" source-line-num="87">   <span class="tlv_ident_comment">// Stimulus</span></span>
<span class="line" line-num="88" source-line-num="88">   <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="89" source-line-num="89">   <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="90" source-line-num="90">      <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="91" source-line-num="91">         <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen">|tb_gen</span></span>
<span class="line" line-num="92" source-line-num="92">            <span class="tlv_ident_comment">// Generate stimulus feeding the E-Link input FIFO.</span></span>
<span class="line" line-num="93" source-line-num="93">            <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|tb_gen@2">@1</span></span>
<span class="line" line-num="94" source-line-num="94">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|reset"tlx_ref="">|reset</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|reset@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="|reset$reset"stage_in_phases="2">$reset</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="95" source-line-num="95">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head_tail_rand"stage_in_phases="2">$head_tail_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(0 + ((yy * xx) ^ ((3 * xx) + yy))) % 257 +: 3];</span></span>
<span class="line" line-num="96" source-line-num="96">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head"stage_in_phases="2">$head</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$MidPacket"stage_in_phases="2">$MidPacket</span> <span class="tlv_ident_hdl_code">&amp;&amp;              </span><span class="tlv_ident_comment">// can be head</span></span>
<span class="line" line-num="97" source-line-num="97">                       <span class="tlv_ident_hdl_code">(&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head_tail_rand"stage_in_phases="2">$head_tail_rand</span><span class="tlv_ident_hdl_code">) &amp;&amp;       </span><span class="tlv_ident_comment">// 1/8 probability</span></span>
<span class="line" line-num="98" source-line-num="98">                       <span class="tlv_ident_hdl_code">! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">&amp;&amp;                  </span><span class="tlv_ident_comment">// after reset</span></span>
<span class="line" line-num="99" source-line-num="99">                       <span class="tlv_ident_hdl_code">(</span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_state_sig" logical_entity="|tb_gen$CycCnt"stage_in_phases="2">$CycCnt</span> <span class="tlv_ident_hdl_code">&lt; 100);  </span><span class="tlv_ident_comment">// until max cycle</span></span>
<span class="line" line-num="100" source-line-num="100">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$tail"stage_in_phases="2">$tail</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="101" source-line-num="101">                       <span class="tlv_ident_hdl_code">(</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head"stage_in_phases="2">$head</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$MidPacket"stage_in_phases="2">$MidPacket</span><span class="tlv_ident_hdl_code">) &amp;&amp;   </span><span class="tlv_ident_comment">// can be tail</span></span>
<span class="line" line-num="102" source-line-num="102">                       <span class="tlv_ident_hdl_code">((&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head_tail_rand"stage_in_phases="2">$head_tail_rand</span><span class="tlv_ident_hdl_code">) ||    </span><span class="tlv_ident_comment">// 1/8 probability</span></span>
<span class="line" line-num="103" source-line-num="103">                        <span class="tlv_ident_hdl_code">(</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$PktCnt"stage_in_phases="2">$PktCnt</span> <span class="tlv_ident_hdl_code">&gt;= 15));  </span><span class="tlv_ident_comment">// force tail on max length</span></span>
<span class="line" line-num="104" source-line-num="104">               <span class="tlv_ident_comment">// $MidPacket = after head through tail.</span></span>
<span class="line" line-num="105" source-line-num="105">               <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx|tb_gen@0">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$MidPacket"stage_in_phases="0">$MidPacket</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">&amp;&amp; ((</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head"stage_in_phases="2">$head</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span><span class="tlv_ident_hdl_code">) || </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$MidPacket"stage_in_phases="2">$MidPacket</span><span class="tlv_ident_hdl_code">) &amp;&amp; ! (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$tail"stage_in_phases="2">$tail</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="106" source-line-num="106">               </span>
<span class="line" line-num="107" source-line-num="107">               <span class="tlv_ident_comment">// Packet and flit-within-packet counts.</span></span>
<span class="line" line-num="108" source-line-num="108">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset_or_head"stage_in_phases="2">$reset_or_head</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head"stage_in_phases="2">$head</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="109" source-line-num="109">               <span class="tlv_ident_when">?$reset_or_head</span></span>
<span class="line" line-num="110" source-line-num="110">                  <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx|tb_gen@0">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$PktCnt"stage_in_phases="0">$PktCnt</span><span class="tlv_ident_state_sig">[</span><span class="tlv_ident_hdl_code">7</span><span class="tlv_ident_state_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_state_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">? 0 : </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$PktCnt"stage_in_phases="2">$PktCnt</span> <span class="tlv_ident_hdl_code">+ 1;</span></span>
<span class="line" line-num="111" source-line-num="111">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset_or_trans_valid"stage_in_phases="2">$reset_or_trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="112" source-line-num="112">               <span class="tlv_ident_when">?$reset_or_trans_valid</span></span>
<span class="line" line-num="113" source-line-num="113">                  <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx|tb_gen@0">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$FlitCnt"stage_in_phases="0">$FlitCnt</span><span class="tlv_ident_state_sig">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_state_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_state_sig">] </span><span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$tail"stage_in_phases="2">$tail</span><span class="tlv_ident_hdl_code">) ? 0 : </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$FlitCnt"stage_in_phases="2">$FlitCnt</span> <span class="tlv_ident_hdl_code">+ 1;</span></span>
<span class="line" line-num="114" source-line-num="114">               </span>
<span class="line" line-num="115" source-line-num="115">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc_rand"stage_in_phases="2">$vc_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(124 + ((yy * xx) ^ ((3 * yy) + yy))) % 257 +: 2];</span></span>
<span class="line" line-num="116" source-line-num="116">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc"stage_in_phases="2">$vc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc_rand"stage_in_phases="2">$vc_rand</span> <span class="tlv_ident_hdl_code">&gt; 3)        </span><span class="tlv_ident_comment">// out of range?</span></span>
<span class="line" line-num="117" source-line-num="117">                           <span class="tlv_ident_hdl_code">? {1'b0, </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc_rand"stage_in_phases="2">$vc_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2-2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}      </span><span class="tlv_ident_comment">// drop the max bit</span></span>
<span class="line" line-num="118" source-line-num="118">                           <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc_rand"stage_in_phases="2">$vc_rand</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="119" source-line-num="119">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$rand_valid"stage_in_phases="2">$rand_valid</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(248 + ((yy * xx) ^ ((3 * xx) + yy))) % 257 +: 3];</span></span>
<span class="line" line-num="120" source-line-num="120">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head"stage_in_phases="2">$head</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$MidPacket"stage_in_phases="2">$MidPacket</span><span class="tlv_ident_hdl_code">) &amp;&amp; (| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$rand_valid"stage_in_phases="2">$rand_valid</span><span class="tlv_ident_hdl_code">) &amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc"stage_in_phases="2">$vc</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$blocked"stage_in_phases="2">$blocked</span><span class="tlv_ident_hdl_code">;   </span><span class="tlv_ident_comment">// 1/8 probability of idle</span></span>
<span class="line" line-num="121" source-line-num="121">               <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="122" source-line-num="122">                  <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit">&gt;flit</span></span>
<span class="line" line-num="123" source-line-num="123">                     <span class="tlv_ident_comment">// Generate a random flit.</span></span>
<span class="line" line-num="124" source-line-num="124">                     <span class="tlv_ident_comment">// Random values from which to generate flit:</span></span>
<span class="line" line-num="125" source-line-num="125">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x_rand"stage_in_phases="2">$dest_x_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(115 + ((yy * xx) ^ ((3 * xx) + yy))) % 257 +: 1];</span></span>
<span class="line" line-num="126" source-line-num="126">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y_rand"stage_in_phases="2">$dest_y_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(239 + ((yy * xx) ^ ((3 * xx) + yy))) % 257 +: 1];</span></span>
<span class="line" line-num="127" source-line-num="127">                     <span class="tlv_ident_comment">// Flit:</span></span>
<span class="line" line-num="128" source-line-num="128">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$vc"stage_in_phases="2">$vc</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$vc"stage_in_phases="2">$vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="129" source-line-num="129">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$head"stage_in_phases="2">$head</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$head"stage_in_phases="2">$head</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="130" source-line-num="130">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$tail"stage_in_phases="2">$tail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$tail"stage_in_phases="2">$tail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="131" source-line-num="131">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$pkt_cnt"stage_in_phases="2">$pkt_cnt</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">7</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$PktCnt"stage_in_phases="2">$PktCnt</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="132" source-line-num="132">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$flit_cnt"stage_in_phases="2">$flit_cnt</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx|tb_gen$FlitCnt"stage_in_phases="2">$FlitCnt</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="133" source-line-num="133">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$src_x"stage_in_phases="2">$src_x</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= xx;</span></span>
<span class="line" line-num="134" source-line-num="134">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$src_y"stage_in_phases="2">$src_y</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= yy;</span></span>
<span class="line" line-num="135" source-line-num="135">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x"stage_in_phases="2">$dest_x</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x_rand"stage_in_phases="2">$dest_x_rand</span> <span class="tlv_ident_hdl_code">&gt; 1) </span><span class="tlv_ident_comment">// out of range?</span></span>
<span class="line" line-num="136" source-line-num="136">                                  <span class="tlv_ident_hdl_code">? {1'b0, </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x_rand"stage_in_phases="2">$dest_x_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}  </span><span class="tlv_ident_comment">// drop the max bit</span></span>
<span class="line" line-num="137" source-line-num="137">                                  <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x_rand"stage_in_phases="2">$dest_x_rand</span><span class="tlv_ident_hdl_code">;                          </span><span class="tlv_ident_comment">// in range</span></span>
<span class="line" line-num="138" source-line-num="138">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y"stage_in_phases="2">$dest_y</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y_rand"stage_in_phases="2">$dest_y_rand</span> <span class="tlv_ident_hdl_code">&gt; 1) </span><span class="tlv_ident_comment">// out of range?</span></span>
<span class="line" line-num="139" source-line-num="139">                                  <span class="tlv_ident_hdl_code">? {1'b0, </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y_rand"stage_in_phases="2">$dest_y_rand</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">}  </span><span class="tlv_ident_comment">// drop the max bit</span></span>
<span class="line" line-num="140" source-line-num="140">                                  <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y_rand"stage_in_phases="2">$dest_y_rand</span><span class="tlv_ident_hdl_code">;                          </span><span class="tlv_ident_comment">// in range</span></span>
<span class="line" line-num="141" source-line-num="141">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$data"stage_in_phases="2">$data</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">7</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(106 + ((yy * xx) ^ ((3 * xx) + yy))) % 257 +: 8];</span></span>
<span class="line" line-num="142" source-line-num="142">                     </span>
<span class="line" line-num="143" source-line-num="143">                     </span>
<span class="line" line-num="144" source-line-num="144">   <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="145" source-line-num="145">   <span class="tlv_ident_comment">// Design</span></span>
<span class="line" line-num="146" source-line-num="146">   <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="147" source-line-num="147">   </span>
<span class="line" line-num="148" source-line-num="148">   <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="149" source-line-num="149">      <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="150" source-line-num="150">         </span>
<span class="line" line-num="151" source-line-num="151">         <span class="tlv_ident_comment">// E-Link</span></span>
<span class="line" line-num="152" source-line-num="152">         <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="153" source-line-num="153">         <span class="tlv_ident_comment">// Into Network</span></span>
<span class="line" line-num="154" source-line-num="154"></span>
<span class="line" line-num="155" source-line-num="155">         <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="156" source-line-num="156">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen">|tb_gen</span></span>
<span class="line" line-num="157" source-line-num="157">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">@1</span></span>
<span class="line" line-num="158" source-line-num="158">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; (</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$vc"stage_in_phases="2">$vc</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">vc);</span></span>
<span class="line" line-num="159" source-line-num="159">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="160" source-line-num="160">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">@0</span></span>
<span class="line" line-num="161" source-line-num="161">                  <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@-2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$Prio"stage_in_phases="-2">$Prio</span> <span class="tlv_ident_hdl_code">= vc;  </span><span class="tlv_ident_comment">// Prioritize based on VC.</span></span>
<span class="line" line-num="162" source-line-num="162">         <span class="tlv_ident_keyword1">\source ./m4/1c/pipeflow_tlv.m4 841   </span><span class="tlv_ident_comment">// Instantiated from stdin, 162 as: m4+vc_flop_fifo_v2(xx, tb_gen, 1, netwk_inject, 1, 6, &gt;flit, 3:0, 1:0)</span></span>
<span class="line" line-num="163" source-line-num="162">            <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="164" source-line-num="162">               <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen">|tb_gen</span></span>
<span class="line" line-num="165" source-line-num="162">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">@1</span></span>
<span class="line" line-num="166" source-line-num="162">                     <span class="tlv_ident_comment">// Apply inputs to the right VC FIFO.</span></span>
<span class="line" line-num="167" source-line-num="162">                     <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="168" source-line-num="162">         </span>
<span class="line" line-num="169" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$reset"stage_in_phases="2">$reset</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="170" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$bypassed_fifos_for_this_vc"stage_in_phases="2">$bypassed_fifos_for_this_vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="171" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_avail"stage_in_phases="2">$trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="172" source-line-num="162">                     <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="173" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;flit">&gt;flit</span></span>
<span class="line" line-num="174" source-line-num="162">                           <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$ANY"stage_in_phases="2">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="175" source-line-num="162">               <span class="tlv_ident_comment">// Instantiate FIFO.  Output to stage (m4_out_at - 1) because bypass is m4_out_at.</span></span>
<span class="line" line-num="176" source-line-num="162">               <span class="tlv_ident_keyword1">\source ./m4/1c/pipeflow_tlv.m4 550   </span><span class="tlv_ident_comment">// Instantiated from ./m4/1c/pipeflow_tlv.m4, 855 as: m4_flop_fifo_v2(...)</span></span>
<span class="line" line-num="177" source-line-num="162">                  <span class="tlv_ident_comment">//|default</span></span>
<span class="line" line-num="178" source-line-num="162">                  <span class="tlv_ident_comment">//   @0</span></span>
<span class="line" line-num="179" source-line-num="162">                  <span class="tlv_ident_keyword1">\SV_plus</span></span>
<span class="line" line-num="180" source-line-num="162">                     <span class="tlv_ident_hdl_code">localparam bit [</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1:0] full_mark_2 = 6 - 0;</span></span>
<span class="line" line-num="181" source-line-num="162">               </span>
<span class="line" line-num="182" source-line-num="162">                  <span class="tlv_ident_comment">// FIFO Instantiation</span></span>
<span class="line" line-num="183" source-line-num="162">               </span>
<span class="line" line-num="184" source-line-num="162">                  <span class="tlv_ident_comment">// Hierarchy declarations</span></span>
<span class="line" line-num="185" source-line-num="162">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen">|tb_gen</span></span>
<span class="line" line-num="186" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(6)-1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="187" source-line-num="162">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="188" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(6)-1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="189" source-line-num="162">               </span>
<span class="line" line-num="190" source-line-num="162">                  <span class="tlv_ident_comment">// Hierarchy</span></span>
<span class="line" line-num="191" source-line-num="162">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen">|tb_gen</span></span>
<span class="line" line-num="192" source-line-num="162">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">@1</span></span>
<span class="line" line-num="193" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$out_blocked"stage_in_phases="2">$out_blocked</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">%-1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$blocked"stage_in_phases="0">$blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="194" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$blocked"stage_in_phases="2">$blocked</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$full"stage_in_phases="4">$full</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$out_blocked"stage_in_phases="2">$out_blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="195" source-line-num="162">                        <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$blocked"stage_in_phases="2">$blocked</span><span class="tlv_ident_hdl_code">)   </span><span class="tlv_ident_comment">// Not required to be consumed elsewhere.</span></span>
<span class="line" line-num="196" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$would_bypass"stage_in_phases="2">$would_bypass</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$empty"stage_in_phases="4">$empty</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="197" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$bypass"stage_in_phases="2">$bypass</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$would_bypass"stage_in_phases="2">$would_bypass</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$out_blocked"stage_in_phases="2">$out_blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="198" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$push"stage_in_phases="2">$push</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$bypass"stage_in_phases="2">$bypass</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="199" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$grow"stage_in_phases="2">$grow</span>   <span class="tlv_ident_hdl_code">=   </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp;   </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$out_blocked"stage_in_phases="2">$out_blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="200" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$shrink"stage_in_phases="2">$shrink</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_avail"stage_in_phases="2">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$out_blocked"stage_in_phases="2">$out_blocked</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$empty"stage_in_phases="4">$empty</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="201" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$valid_count"stage_in_phases="2">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">? '0</span></span>
<span class="line" line-num="202" source-line-num="162">                                                                    <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$valid_count"stage_in_phases="4">$valid_count</span> <span class="tlv_ident_hdl_code">+ (</span></span>
<span class="line" line-num="203" source-line-num="162">                                                                         <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$grow"stage_in_phases="2">$grow</span>   <span class="tlv_ident_hdl_code">? { {(</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1){1'b0}}, 1'b1} :</span></span>
<span class="line" line-num="204" source-line-num="162">                                                                         <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$shrink"stage_in_phases="2">$shrink</span> <span class="tlv_ident_hdl_code">? '1</span></span>
<span class="line" line-num="205" source-line-num="162">                                                                                 <span class="tlv_ident_hdl_code">: '0</span></span>
<span class="line" line-num="206" source-line-num="162">                                                                      <span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="207" source-line-num="162">                        <span class="tlv_ident_comment">// At least 2 valid entries.</span></span>
<span class="line" line-num="208" source-line-num="162">                        <span class="tlv_ident_comment">//$two_valid = | $ValidCount[m4_counter_width-1:1];</span></span>
<span class="line" line-num="209" source-line-num="162">                        <span class="tlv_ident_comment">// but logic depth minimized by taking advantage of prev count &gt;= 4.</span></span>
<span class="line" line-num="210" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$two_valid"stage_in_phases="2">$two_valid</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$valid_count"stage_in_phases="4">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">|| | </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$valid_count"stage_in_phases="2">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="211" source-line-num="162">                        <span class="tlv_ident_comment">// These are an optimization of the commented block below to operate on vectors, rather than bits.</span></span>
<span class="line" line-num="212" source-line-num="162">                        <span class="tlv_ident_comment">// TODO: Keep optimizing...</span></span>
<span class="line" line-num="213" source-line-num="162">                        <span class="tlv_ident_hdl_code">{</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_was_tail"stage_in_phases="2">$$prev_entry_was_tail</span><span class="tlv_ident_hdl_code">} = {</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">[4:0], </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">5</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span><span class="tlv_ident_hdl_code">} </span><span class="tlv_ident_comment">/* circular &lt;&lt; */</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="214" source-line-num="162">                        <span class="tlv_ident_hdl_code">{</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$push"stage_in_phases="2">$$push</span><span class="tlv_ident_hdl_code">} = {6{</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$push"stage_in_phases="2">$push</span><span class="tlv_ident_hdl_code">}} &amp; </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_was_tail"stage_in_phases="2">$prev_entry_was_tail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="215" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="216" source-line-num="162">                           <span class="tlv_ident_comment">// Replaced with optimized versions above:</span></span>
<span class="line" line-num="217" source-line-num="162">                           <span class="tlv_ident_comment">// $prev_entry_was_tail = &gt;entry[(entry+(m4_depth)-1)%(m4_depth)]%+1$reconstructed_is_tail;</span></span>
<span class="line" line-num="218" source-line-num="162">                           <span class="tlv_ident_comment">// $push = |m4_in_pipe$push &amp;&amp; $prev_entry_was_tail;</span></span>
<span class="line" line-num="219" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$valid"stage_in_phases="2">$valid</span> <span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$reconstructed_valid"stage_in_phases="4">$reconstructed_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">%-1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry$pop"stage_in_phases="0">$pop</span><span class="tlv_ident_hdl_code">) || </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$push"stage_in_phases="2">$push</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="220" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$is_tail"stage_in_phases="2">$is_tail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_was_tail"stage_in_phases="2">$prev_entry_was_tail</span>  <span class="tlv_ident_comment">// shift tail</span></span>
<span class="line" line-num="221" source-line-num="162">                                                              <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span><span class="tlv_ident_hdl_code">;  </span><span class="tlv_ident_comment">// retain tail</span></span>
<span class="line" line-num="222" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="2">$state</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">? 1'b0</span></span>
<span class="line" line-num="223" source-line-num="162">                                                      <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$valid"stage_in_phases="2">$valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! (</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$two_valid"stage_in_phases="2">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$is_tail"stage_in_phases="2">$is_tail</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="224" source-line-num="162">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">@2</span></span>
<span class="line" line-num="225" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$empty"stage_in_phases="4">$empty</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$valid_count"stage_in_phases="4">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="226" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$full"stage_in_phases="4">$full</span> <span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$valid_count"stage_in_phases="4">$valid_count</span> <span class="tlv_ident_hdl_code">== full_mark_2);  </span><span class="tlv_ident_comment">// Could optimize for power-of-two depth.</span></span>
<span class="line" line-num="227" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="228" source-line-num="162">                        <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">@2</span></span>
<span class="line" line-num="229" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(entry+(6)-1)%(6)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="4">$state</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="230" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$next_entry_state"stage_in_phases="4">$next_entry_state</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(entry+1)%(6)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="4">$state</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="231" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span> <span class="tlv_ident_hdl_code">= (  </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; (!</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="4">$state</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span><span class="tlv_ident_hdl_code">)) ||</span></span>
<span class="line" line-num="232" source-line-num="162">                                                    <span class="tlv_ident_hdl_code">(! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; (!</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$next_entry_state"stage_in_phases="4">$next_entry_state</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="4">$state</span><span class="tlv_ident_hdl_code">)) ||</span></span>
<span class="line" line-num="233" source-line-num="162">                                                    <span class="tlv_ident_hdl_code">(</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$empty"stage_in_phases="4">$empty</span> <span class="tlv_ident_hdl_code">&amp;&amp; (entry == 0));  </span><span class="tlv_ident_comment">// need a tail when empty for push</span></span>
<span class="line" line-num="234" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$is_head"stage_in_phases="4">$is_head</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="4">$state</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="235" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$reconstructed_valid"stage_in_phases="4">$reconstructed_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$state"stage_in_phases="4">$state</span> <span class="tlv_ident_hdl_code">|| (</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="236" source-line-num="162">                  <span class="tlv_ident_comment">// Write data</span></span>
<span class="line" line-num="237" source-line-num="162">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen">|tb_gen</span></span>
<span class="line" line-num="238" source-line-num="162">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">@1</span></span>
<span class="line" line-num="239" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="240" source-line-num="162">                           <span class="tlv_ident_comment">//?$push</span></span>
<span class="line" line-num="241" source-line-num="162">                           <span class="tlv_ident_comment">//   $aNY = |m4_in_pipe['']m4_trans_hier$ANY;</span></span>
<span class="line" line-num="242" source-line-num="162">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry&gt;flit">&gt;flit</span></span>
<span class="line" line-num="243" source-line-num="162">                              <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$push"stage_in_phases="2">$push</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry&gt;flit$ANY"stage_in_phases="4">$ANY</span> <span class="tlv_ident_comment">/* RETAIN */</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="244" source-line-num="162">                  <span class="tlv_ident_comment">// Read data</span></span>
<span class="line" line-num="245" source-line-num="162">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="246" source-line-num="162">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">@0</span></span>
<span class="line" line-num="247" source-line-num="162">                        <span class="tlv_ident_comment">//$pop  = ! &gt;m4_top|m4_in_pipe%m4_align(m4_in_at + 1, m4_out_at)$empty &amp;&amp; ! $blocked;</span></span>
<span class="line" line-num="248" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="249" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry$is_head"stage_in_phases="0">$is_head</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+2</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry$is_head"stage_in_phases="4">$is_head</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="250" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry$pop"stage_in_phases="0">$pop</span>  <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry$is_head"stage_in_phases="0">$is_head</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$blocked"stage_in_phases="0">$blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="251" source-line-num="162">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;read_masked">&gt;read_masked</span></span>
<span class="line" line-num="252" source-line-num="162">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;read_masked&gt;flit">&gt;flit</span></span>
<span class="line" line-num="253" source-line-num="162">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;read_masked&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry$is_head"stage_in_phases="0">$is_head</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+2</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;entry&gt;flit$ANY"stage_in_phases="4">$ANY</span> <span class="tlv_ident_comment">/* $aNY */ </span><span class="tlv_ident_hdl_code">: '0;</span></span>
<span class="line" line-num="254" source-line-num="162">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum">&gt;accum</span></span>
<span class="line" line-num="255" source-line-num="162">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum&gt;flit">&gt;flit</span></span>
<span class="line" line-num="256" source-line-num="162">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= ((entry == 0) ? '0 : </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(entry+(6)-1)%(6)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">) |</span></span>
<span class="line" line-num="257" source-line-num="162">                                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;read_masked"tlx_ref="">&gt;read_masked</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;read_masked&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;read_masked&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="258" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head">&gt;head</span></span>
<span class="line" line-num="259" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_avail"stage_in_phases="0">$trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="260" source-line-num="162">                           <span class="tlv_ident_when">?$trans_avail</span></span>
<span class="line" line-num="261" source-line-num="162">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head&gt;flit">&gt;flit</span></span>
<span class="line" line-num="262" source-line-num="162">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(6)-1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;entry&gt;accum&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="263" source-line-num="162">               </span>
<span class="line" line-num="264" source-line-num="162">                  <span class="tlv_ident_comment">// Bypass</span></span>
<span class="line" line-num="265" source-line-num="162">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="266" source-line-num="162">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">@0</span></span>
<span class="line" line-num="267" source-line-num="162">                        <span class="tlv_ident_comment">// Available output.  Sometimes it's necessary to know what would be coming to determined</span></span>
<span class="line" line-num="268" source-line-num="162">                        <span class="tlv_ident_comment">// if it's blocked.  This can be used externally in that case.</span></span>
<span class="line" line-num="269" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head">&gt;fifo_head</span></span>
<span class="line" line-num="270" source-line-num="162">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_avail"stage_in_phases="0">$trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="271" source-line-num="162">                           <span class="tlv_ident_when">?$trans_avail</span></span>
<span class="line" line-num="272" source-line-num="162">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head&gt;flit">&gt;flit</span></span>
<span class="line" line-num="273" source-line-num="162">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$would_bypass"stage_in_phases="2">$would_bypass</span></span>
<span class="line" line-num="274" source-line-num="162">                                              <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">%+1</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen&gt;flit$ANY"stage_in_phases="2">$ANY</span></span>
<span class="line" line-num="275" source-line-num="162">                                              <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head"tlx_ref="">&gt;head</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;head&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="276" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$would_bypass"stage_in_phases="2">$would_bypass</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$trans_avail"stage_in_phases="2">$trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="277" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_valid"stage_in_phases="0">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$blocked"stage_in_phases="0">$blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="278" source-line-num="162">                        <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="279" source-line-num="162">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;flit">&gt;flit</span></span>
<span class="line" line-num="280" source-line-num="162">                              <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head"tlx_ref="">&gt;fifo_head</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;fifo_head&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="281" source-line-num="162">               </span>
<span class="line" line-num="282" source-line-num="162">               </span>
<span class="line" line-num="283" source-line-num="162">               </span>
<span class="line" line-num="284" source-line-num="162">                  <span class="tlv_ident_comment">/* Alternate code for pointer indexing.  Replaces $ANY expression above.</span></span>
<span class="line" line-num="285" source-line-num="162">               </span>
<span class="line" line-num="286" source-line-num="162">                  <span class="tlv_ident_comment">// Hierarchy</span></span>
<span class="line" line-num="287" source-line-num="162">                  <span class="tlv_ident_comment">|tb_gen</span></span>
<span class="line" line-num="288" source-line-num="162">                     <span class="tlv_ident_comment">&gt;entry2[(6)-1:0]</span></span>
<span class="line" line-num="289" source-line-num="162">               </span>
<span class="line" line-num="290" source-line-num="162">                  <span class="tlv_ident_comment">// Head/Tail ptrs.</span></span>
<span class="line" line-num="291" source-line-num="162">                  <span class="tlv_ident_comment">|tb_gen</span></span>
<span class="line" line-num="292" source-line-num="162">                     <span class="tlv_ident_comment">@1</span></span>
<span class="line" line-num="293" source-line-num="162">                        <span class="tlv_ident_comment">%next$WrPtr[\$clog2(6)-1:0] =</span></span>
<span class="line" line-num="294" source-line-num="162">                            <span class="tlv_ident_comment">$reset       ? '0 :</span></span>
<span class="line" line-num="295" source-line-num="162">                            <span class="tlv_ident_comment">$trans_valid ? ($WrPtr == (6 - 1))</span></span>
<span class="line" line-num="296" source-line-num="162">                                             <span class="tlv_ident_comment">? '0</span></span>
<span class="line" line-num="297" source-line-num="162">                                             <span class="tlv_ident_comment">: $WrPtr + {{(\$clog2(6)-1){1'b0}}, 1'b1} :</span></span>
<span class="line" line-num="298" source-line-num="162">                                           <span class="tlv_ident_comment">$RETAIN;</span></span>
<span class="line" line-num="299" source-line-num="162">                  <span class="tlv_ident_comment">|netwk_inject</span></span>
<span class="line" line-num="300" source-line-num="162">                     <span class="tlv_ident_comment">@0</span></span>
<span class="line" line-num="301" source-line-num="162">                        <span class="tlv_ident_comment">%next$RdPtr[\$clog2(6)-1:0] =</span></span>
<span class="line" line-num="302" source-line-num="162">                            <span class="tlv_ident_comment">&gt;vc|tb_gen%+1$reset</span></span>
<span class="line" line-num="303" source-line-num="162">                                         <span class="tlv_ident_comment">? '0 :</span></span>
<span class="line" line-num="304" source-line-num="162">                            <span class="tlv_ident_comment">$trans_valid ? ($RdPtr == (6 - 1))</span></span>
<span class="line" line-num="305" source-line-num="162">                                             <span class="tlv_ident_comment">? '0</span></span>
<span class="line" line-num="306" source-line-num="162">                                             <span class="tlv_ident_comment">: $RdPtr + {{(\$clog2(6)-1){1'b0}}, 1'b1} :</span></span>
<span class="line" line-num="307" source-line-num="162">                                           <span class="tlv_ident_comment">$RETAIN;</span></span>
<span class="line" line-num="308" source-line-num="162">                  <span class="tlv_ident_comment">// Write FIFO</span></span>
<span class="line" line-num="309" source-line-num="162">                  <span class="tlv_ident_comment">|tb_gen</span></span>
<span class="line" line-num="310" source-line-num="162">                     <span class="tlv_ident_comment">@1</span></span>
<span class="line" line-num="311" source-line-num="162">                        <span class="tlv_ident_comment">$dummy = '0;</span></span>
<span class="line" line-num="312" source-line-num="162">                        <span class="tlv_ident_comment">?$trans_valid</span></span>
<span class="line" line-num="313" source-line-num="162">                           <span class="tlv_ident_comment">// This doesn't work because SV complains for FIFOs in replicated context that</span></span>
<span class="line" line-num="314" source-line-num="162">                           <span class="tlv_ident_comment">// there are multiple procedures that assign the signals.</span></span>
<span class="line" line-num="315" source-line-num="162">                           <span class="tlv_ident_comment">// Array writes can be done in an SV module.</span></span>
<span class="line" line-num="316" source-line-num="162">                           <span class="tlv_ident_comment">// The only long-term resolutions are support for module generation and use</span></span>
<span class="line" line-num="317" source-line-num="162">                           <span class="tlv_ident_comment">// signals declared within for loops with cross-hierarchy references in SV.</span></span>
<span class="line" line-num="318" source-line-num="162">                           <span class="tlv_ident_comment">// TODO: To make a simulation-efficient FIFO, use DesignWare.</span></span>
<span class="line" line-num="319" source-line-num="162">                           <span class="tlv_ident_comment">{&gt;entry2[$WrPtr]$$ANY} = $ANY;</span></span>
<span class="line" line-num="320" source-line-num="162">                  <span class="tlv_ident_comment">// Read FIFO</span></span>
<span class="line" line-num="321" source-line-num="162">                  <span class="tlv_ident_comment">|netwk_inject</span></span>
<span class="line" line-num="322" source-line-num="162">                     <span class="tlv_ident_comment">@0</span></span>
<span class="line" line-num="323" source-line-num="162">                        <span class="tlv_ident_comment">&gt;read2</span></span>
<span class="line" line-num="324" source-line-num="162">                           <span class="tlv_ident_comment">$trans_valid = |netwk_inject$trans_valid;</span></span>
<span class="line" line-num="325" source-line-num="162">                           <span class="tlv_ident_comment">?$trans_valid</span></span>
<span class="line" line-num="326" source-line-num="162">                              <span class="tlv_ident_comment">$ANY = &gt;vc|tb_gen&gt;entry2[|netwk_inject$RdPtr]%+1$ANY;</span></span>
<span class="line" line-num="327" source-line-num="162">                           <span class="tlv_ident_comment">`BOGUS_USE($dummy)</span></span>
<span class="line" line-num="328" source-line-num="162">                        <span class="tlv_ident_comment">?$trans_valid</span></span>
<span class="line" line-num="329" source-line-num="162">                           <span class="tlv_ident_comment">$ANY = &gt;read2$ANY;</span></span>
<span class="line" line-num="330" source-line-num="162">                  <span class="tlv_ident_comment">*/</span></span>
<span class="line" line-num="331" source-line-num="162">               <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="332" source-line-num="162">         </span>
<span class="line" line-num="333" source-line-num="162">            <span class="tlv_ident_comment">// FIFO select.</span></span>
<span class="line" line-num="334" source-line-num="162">            <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="335" source-line-num="162">            <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="336" source-line-num="162">               <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="337" source-line-num="162">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">@0</span></span>
<span class="line" line-num="338" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$arbing"stage_in_phases="0">$arbing</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$has_credit"stage_in_phases="0">$has_credit</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="339" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;prio">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="340" source-line-num="162">                        <span class="tlv_ident_comment">// Decoded priority.</span></span>
<span class="line" line-num="341" source-line-num="162">                        <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@-2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;prio$Match"stage_in_phases="-2">$Match</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">prio == </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$Prio"stage_in_phases="0">$Prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="342" source-line-num="162">                     <span class="tlv_ident_comment">// Mask of same-prio VCs.</span></span>
<span class="line" line-num="343" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;other_vc">&gt;other_vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="344" source-line-num="162">                        <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@-2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;other_vc$SamePrio"stage_in_phases="-2">$SamePrio</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$Prio"stage_in_phases="0">$Prio</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">other_vc</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$Prio"stage_in_phases="0">$Prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="345" source-line-num="162">                        <span class="tlv_ident_comment">// Select among same-prio VCs.</span></span>
<span class="line" line-num="346" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;other_vc$competing"stage_in_phases="0">$competing</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;other_vc$SamePrio"stage_in_phases="0">$SamePrio</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">other_vc</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$arbing"stage_in_phases="0">$arbing</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="347" source-line-num="162">                     <span class="tlv_ident_comment">// Select FIFO if selected within priority and this VC has the selected (max available) priority.</span></span>
<span class="line" line-num="348" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$fifo_sel"stage_in_phases="0">$fifo_sel</span> <span class="tlv_ident_hdl_code">= ((</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;other_vc"tlx_ref="">&gt;other_vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;other_vc$competing"stage_in_phases="0">$competing</span> <span class="tlv_ident_hdl_code">&amp; ~((1 &lt;&lt; vc) - 1)) == (1 &lt;&lt; vc)) &amp;&amp; | (</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;prio$Match"stage_in_phases="0">$Match</span> <span class="tlv_ident_hdl_code">&amp; </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject$sel"stage_in_phases="0">$sel</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="349" source-line-num="162">                        <span class="tlv_ident_comment">// TODO: Need to replace m4_am_max with round-robin within priority.</span></span>
<span class="line" line-num="350" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$blocked"stage_in_phases="0">$blocked</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$fifo_sel"stage_in_phases="0">$fifo_sel</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="351" source-line-num="162">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@2">@1</span></span>
<span class="line" line-num="352" source-line-num="162">                     <span class="tlv_ident_comment">// Can bypass FIFOs?</span></span>
<span class="line" line-num="353" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$can_bypass_fifos_for_this_vc"stage_in_phases="2">$can_bypass_fifos_for_this_vc</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="354" source-line-num="162">                                                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_gen$empty"stage_in_phases="4">$empty</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="355" source-line-num="162">                                                     <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$has_credit"stage_in_phases="2">$has_credit</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="356" source-line-num="162">         </span>
<span class="line" line-num="357" source-line-num="162">                     <span class="tlv_ident_comment">// Indicate output VC as per-VC FIFO output $trans_valid or could bypass in this VC.</span></span>
<span class="line" line-num="358" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$bypassed_fifos_for_this_vc"stage_in_phases="2">$bypassed_fifos_for_this_vc</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$can_bypass_fifos_for_this_vc"stage_in_phases="2">$can_bypass_fifos_for_this_vc</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$fifo_trans_avail"stage_in_phases="2">$fifo_trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="359" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$bypassed_fifos_for_this_vc"stage_in_phases="2">$bypassed_fifos_for_this_vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="360" source-line-num="162">                     <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span><span class="tlv_ident_hdl_code">)  </span><span class="tlv_ident_comment">// okay to not consume this</span></span>
<span class="line" line-num="361" source-line-num="162">            <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="362" source-line-num="162">               <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="363" source-line-num="162">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject@0">@0</span></span>
<span class="line" line-num="364" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="365" source-line-num="162">                        <span class="tlv_ident_comment">// Trans available for this prio/VC?</span></span>
<span class="line" line-num="366" source-line-num="162">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject&gt;vc$avail_within_prio"stage_in_phases="0">$avail_within_prio</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="367" source-line-num="162">                                             <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;prio$Match"stage_in_phases="0">$Match</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="368" source-line-num="162">                     <span class="tlv_ident_comment">// Is this priority available in FIFOs.</span></span>
<span class="line" line-num="369" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject$avail"stage_in_phases="0">$avail</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject&gt;vc$avail_within_prio"stage_in_phases="0">$avail_within_prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="370" source-line-num="162">                     <span class="tlv_ident_comment">// Select this priority if its the max available.</span></span>
<span class="line" line-num="371" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject$sel"stage_in_phases="0">$sel</span> <span class="tlv_ident_hdl_code">= ((</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|netwk_inject$avail"stage_in_phases="0">$avail</span> <span class="tlv_ident_hdl_code">&amp; ~((1 &lt;&lt; prio) - 1)) == (1 &lt;&lt; prio));</span></span>
<span class="line" line-num="372" source-line-num="162">         </span>
<span class="line" line-num="373" source-line-num="162">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="374" source-line-num="162">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|netwk_inject@0">@0</span></span>
<span class="line" line-num="375" source-line-num="162">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$fifo_trans_avail"stage_in_phases="0">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$arbing"stage_in_phases="0">$arbing</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="376" source-line-num="162">                  <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out">&gt;fifos_out</span></span>
<span class="line" line-num="377" source-line-num="162">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out$fifo_trans_avail"stage_in_phases="0">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$fifo_trans_avail"stage_in_phases="0">$fifo_trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="378" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="379" source-line-num="162">                     <span class="tlv_ident_keyword1">\source ./m4/1c/rw_tlv.m4 279   </span><span class="tlv_ident_comment">// Instantiated from ./m4/1c/pipeflow_tlv.m4, 903 as: m4_select(...)</span></span>
<span class="line" line-num="380" source-line-num="162">                        </span>
<span class="line" line-num="381" source-line-num="162">                        <span class="tlv_ident_comment">// This is a suboptimal implementation for simulation.</span></span>
<span class="line" line-num="382" source-line-num="162">                        <span class="tlv_ident_comment">// It does AND/OR reduction.  It would be better in simulation to simply index the desired value,</span></span>
<span class="line" line-num="383" source-line-num="162">                        <span class="tlv_ident_comment">//   but this is not currently supported in SandPiper as it is not legal across generate loops.</span></span>
<span class="line" line-num="384" source-line-num="162">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="385" source-line-num="162">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum">&gt;accum</span></span>
<span class="line" line-num="386" source-line-num="162">                              <span class="tlv_ident_keyword1">\always_comb</span></span>
<span class="line" line-num="387" source-line-num="162">                                 <span class="tlv_ident_hdl_code">if (vc == </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$low(</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$fifo_sel"stage_in_phases="0">$fifo_sel</span><span class="tlv_ident_hdl_code">))</span></span>
<span class="line" line-num="388" source-line-num="162">                                    <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$fifo_sel"stage_in_phases="0">$fifo_sel</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">: '0;</span></span>
<span class="line" line-num="389" source-line-num="162">                                 <span class="tlv_ident_hdl_code">else</span></span>
<span class="line" line-num="390" source-line-num="162">                                    <span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$fifo_sel"stage_in_phases="0">$fifo_sel</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">vc-1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="391" source-line-num="162">                                             </span>
<span class="line" line-num="392" source-line-num="162">                        <span class="tlv_ident_when">?$fifo_trans_avail</span></span>
<span class="line" line-num="393" source-line-num="162">                           <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$high(</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$fifo_sel"stage_in_phases="0">$fifo_sel</span><span class="tlv_ident_hdl_code">)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="394" source-line-num="162">                                             <span class="tlv_ident_comment">/* Old way:</span></span>
<span class="line" line-num="395" source-line-num="162">                        <span class="tlv_ident_comment">\always_comb</span></span>
<span class="line" line-num="396" source-line-num="162">                           <span class="tlv_ident_comment">$$ANY = m4_init;</span></span>
<span class="line" line-num="397" source-line-num="162">                           <span class="tlv_ident_comment">for (int i = m4_MIN; i &lt;= m4_MAX; i++)</span></span>
<span class="line" line-num="398" source-line-num="162">                              <span class="tlv_ident_comment">$ANY = $ANY | (&gt;vc[i]m4_index_sig_match ? &gt;vc[i]$ANY : '0);</span></span>
<span class="line" line-num="399" source-line-num="162">                        <span class="tlv_ident_comment">*/</span></span>
<span class="line" line-num="400" source-line-num="162">                     <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="401" source-line-num="162">         </span>
<span class="line" line-num="402" source-line-num="162">                  <span class="tlv_ident_comment">// Output transaction</span></span>
<span class="line" line-num="403" source-line-num="162">                  <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="404" source-line-num="162">         </span>
<span class="line" line-num="405" source-line-num="162">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|netwk_inject@2">@1</span></span>
<span class="line" line-num="406" source-line-num="162">                  <span class="tlv_ident_comment">// Incorporate bypass</span></span>
<span class="line" line-num="407" source-line-num="162">                  <span class="tlv_ident_comment">// Bypass if there's no transaction from the FIFOs, and the incoming transaction is okay for output.</span></span>
<span class="line" line-num="408" source-line-num="162">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$can_bypass_fifos"stage_in_phases="2">$can_bypass_fifos</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$can_bypass_fifos_for_this_vc"stage_in_phases="2">$can_bypass_fifos_for_this_vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="409" source-line-num="162">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$fifo_trans_avail"stage_in_phases="2">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$can_bypass_fifos"stage_in_phases="2">$can_bypass_fifos</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="410" source-line-num="162">                  <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="411" source-line-num="162">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;flit">&gt;flit</span></span>
<span class="line" line-num="412" source-line-num="162">                        <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$fifo_trans_avail"stage_in_phases="2">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out"tlx_ref="">&gt;fifos_out</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;fifos_out$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@2">%+0</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$ANY"stage_in_phases="2">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="413" source-line-num="162">         <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="414" source-line-num="163">         <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="415" source-line-num="164">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject">|netwk_inject</span></span>
<span class="line" line-num="416" source-line-num="165">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">@0</span></span>
<span class="line" line-num="417" source-line-num="166">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$has_credit"stage_in_phases="0">$has_credit</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+2</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$full"stage_in_phases="4">$full</span><span class="tlv_ident_hdl_code">;  </span><span class="tlv_ident_comment">// Temp loopback.  (Okay if not one-entry remaining (&quot;full&quot;) after two-transactions previous to this (one intervening).)</span></span>
<span class="line" line-num="418" source-line-num="167"></span>
<span class="line" line-num="419" source-line-num="168">         <span class="tlv_ident_comment">/*</span></span>
<span class="line" line-num="420" source-line-num="169">         <span class="tlv_ident_comment">// Network X/Y +1/-1 Links</span></span>
<span class="line" line-num="421" source-line-num="170">         <span class="tlv_ident_comment">&gt;direction[1:0]  // 1: Y, 0: X</span></span>
<span class="line" line-num="422" source-line-num="171">            <span class="tlv_ident_comment">&gt;sign[1:0]  // 1: +1, 0: -1</span></span>
<span class="line" line-num="423" source-line-num="172">               <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="424" source-line-num="173">               <span class="tlv_ident_comment">// Connect upstream grid link.</span></span>
<span class="line" line-num="425" source-line-num="174">               <span class="tlv_ident_comment">|grid_out</span></span>
<span class="line" line-num="426" source-line-num="175">               <span class="tlv_ident_comment">|grid_in</span></span>
<span class="line" line-num="427" source-line-num="176">                  <span class="tlv_ident_comment">@0</span></span>
<span class="line" line-num="428" source-line-num="177">                     <span class="tlv_ident_comment">\SV_plus</span></span>
<span class="line" line-num="429" source-line-num="178">                        <span class="tlv_ident_comment">// Characterize connection.</span></span>
<span class="line" line-num="430" source-line-num="179">                        <span class="tlv_ident_comment">localparam DANGLE = ((*direction == 0) ? (*xx == ((*sign == 0) ? 1 : 0))</span></span>
<span class="line" line-num="431" source-line-num="180">                                                               <span class="tlv_ident_comment">: (*yy == ((*sign == 0) ? 1 : 0))</span></span>
<span class="line" line-num="432" source-line-num="181">                                            <span class="tlv_ident_comment">);  // At edge.  No link.</span></span>
<span class="line" line-num="433" source-line-num="182">                        <span class="tlv_ident_comment">localparam UPSTREAM_X = (*direction == 1) ? *xx : ((*sign == 0) ? (*xx + 1) : (*xx - 1));</span></span>
<span class="line" line-num="434" source-line-num="183">                        <span class="tlv_ident_comment">localparam UPSTREAM_Y = (*direction == 0) ? *yy : ((*sign == 0) ? (*yy + 1) : (*yy - 1));</span></span>
<span class="line" line-num="435" source-line-num="184">                        <span class="tlv_ident_comment">// Connect control.</span></span>
<span class="line" line-num="436" source-line-num="185">                        <span class="tlv_ident_comment">if (DANGLE)</span></span>
<span class="line" line-num="437" source-line-num="186">                           <span class="tlv_ident_comment">assign $$trans_valid = '0;</span></span>
<span class="line" line-num="438" source-line-num="187">                        <span class="tlv_ident_comment">else</span></span>
<span class="line" line-num="439" source-line-num="188">                           <span class="tlv_ident_comment">assign $trans_valid = &gt;yy[*UPSTREAM_Y]&gt;xx[*UPSTREAM_X]&gt;direction&gt;sign|grid_out$trans_valid;</span></span>
<span class="line" line-num="440" source-line-num="189">                     <span class="tlv_ident_comment">&gt;flit</span></span>
<span class="line" line-num="441" source-line-num="190">                        <span class="tlv_ident_comment">// Connect transaction.</span></span>
<span class="line" line-num="442" source-line-num="191">                        <span class="tlv_ident_comment">\SV_plus</span></span>
<span class="line" line-num="443" source-line-num="192">                           <span class="tlv_ident_comment">if (DANGLE)</span></span>
<span class="line" line-num="444" source-line-num="193">                              <span class="tlv_ident_comment">assign $$ANY = '0;</span></span>
<span class="line" line-num="445" source-line-num="194">                           <span class="tlv_ident_comment">else</span></span>
<span class="line" line-num="446" source-line-num="195">                              <span class="tlv_ident_comment">// Connect w/ upstream tile.</span></span>
<span class="line" line-num="447" source-line-num="196">                              <span class="tlv_ident_comment">assign $ANY = &gt;yy[*UPSTREAM_Y]&gt;xx[*UPSTREAM_X]&gt;direction&gt;sign|grid_out$ANY;</span></span>
<span class="line" line-num="448" source-line-num="197">               </span>
<span class="line" line-num="449" source-line-num="198">               <span class="tlv_ident_comment">// Grid FIFOs.</span></span>
<span class="line" line-num="450" source-line-num="199">               <span class="tlv_ident_comment">&gt;vc[3:0]</span></span>
<span class="line" line-num="451" source-line-num="200">                  <span class="tlv_ident_comment">|grid_fifo_out</span></span>
<span class="line" line-num="452" source-line-num="201">                     <span class="tlv_ident_comment">@0</span></span>
<span class="line" line-num="453" source-line-num="202">                        <span class="tlv_ident_comment">%next$Prio = &gt;xx&gt;vc|netwk_inject%+0$Prio;</span></span>
<span class="line" line-num="454" source-line-num="203">                     <span class="tlv_ident_comment">&gt;prio[1:0]</span></span>
<span class="line" line-num="455" source-line-num="204">               <span class="tlv_ident_comment">&gt;prio[1:0]</span></span>
<span class="line" line-num="456" source-line-num="205">                  <span class="tlv_ident_comment">|grid_fifo_out</span></span>
<span class="line" line-num="457" source-line-num="206">                     <span class="tlv_ident_comment">&gt;vc[3:0]</span></span>
<span class="line" line-num="458" source-line-num="207">               <span class="tlv_ident_comment">m4 +vc_flop_fifo_v2(sign, grid_in, 1, grid_fifo_out, 1, 1, &gt;flit, 3:0, 1:0)</span></span>
<span class="line" line-num="459" source-line-num="208">               <span class="tlv_ident_comment">|grid_fifo_out</span></span>
<span class="line" line-num="460" source-line-num="209">                  <span class="tlv_ident_comment">@1</span></span>
<span class="line" line-num="461" source-line-num="210">                     <span class="tlv_ident_comment">$blocked = ...;</span></span>
<span class="line" line-num="462" source-line-num="211">                     <span class="tlv_ident_comment">*/</span></span>
<span class="line" line-num="463" source-line-num="212">               </span>
<span class="line" line-num="464" source-line-num="213">            </span>
<span class="line" line-num="465" source-line-num="214">         <span class="tlv_ident_comment">// O-Link</span></span>
<span class="line" line-num="466" source-line-num="215">         <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="467" source-line-num="216">         <span class="tlv_ident_comment">// Out of Network</span></span>
<span class="line" line-num="468" source-line-num="217">         </span>
<span class="line" line-num="469" source-line-num="218">         <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="470" source-line-num="219">            </span>
<span class="line" line-num="471" source-line-num="220">            <span class="tlv_ident_comment">//+// Credit, reflecting </span></span>
<span class="line" line-num="472" source-line-num="221">            <span class="tlv_ident_comment">//+m4_credit_counter(['            $1'], ']m4___file__[', ']m4___line__[', ['m4_['']credit_counter(...)'], $Credit, 1, 2, $reset, $push, &gt;vc|m4_out_pipe%m4_bypass_align$trans_valid)</span></span>
<span class="line" line-num="473" source-line-num="222"></span>
<span class="line" line-num="474" source-line-num="223">         <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="475" source-line-num="224">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject">|netwk_eject</span></span>
<span class="line" line-num="476" source-line-num="225">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">@1</span></span>
<span class="line" line-num="477" source-line-num="226">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span><span class="tlv_ident_hdl_code">; </span><span class="tlv_ident_comment">/* temp loopback */</span></span>
<span class="line" line-num="478" source-line-num="227">         <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_eject">|netwk_eject</span></span>
<span class="line" line-num="479" source-line-num="228">            <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|netwk_eject@2">@1</span></span>
<span class="line" line-num="480" source-line-num="229">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_eject$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|reset"tlx_ref="">|reset</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|reset@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="|reset$reset"stage_in_phases="2">$reset</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="481" source-line-num="230">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_eject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|netwk_inject@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_inject$trans_valid"stage_in_phases="2">$trans_valid</span><span class="tlv_ident_hdl_code">; </span><span class="tlv_ident_comment">/* temp loopback */</span></span>
<span class="line" line-num="482" source-line-num="231">               <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="483" source-line-num="232">                  <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_eject&gt;flit">&gt;flit</span></span>
<span class="line" line-num="484" source-line-num="233">                     <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_eject&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_comment">/* temp loopback */ </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|netwk_inject@2">%+0</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_inject&gt;flit$ANY"stage_in_phases="2">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="485" source-line-num="234">         <span class="tlv_ident_keyword1">\source ./m4/1c/pipeflow_tlv.m4 841   </span><span class="tlv_ident_comment">// Instantiated from stdin, 234 as: m4+vc_flop_fifo_v2(xx, netwk_eject, 1, tb_out, 1, 6, &gt;flit, 3:0, 1:0, 1, 1)</span></span>
<span class="line" line-num="486" source-line-num="234">            <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="487" source-line-num="234">               <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject">|netwk_eject</span></span>
<span class="line" line-num="488" source-line-num="234">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">@1</span></span>
<span class="line" line-num="489" source-line-num="234">                     <span class="tlv_ident_comment">// Apply inputs to the right VC FIFO.</span></span>
<span class="line" line-num="490" source-line-num="234">                     <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="491" source-line-num="234">         </span>
<span class="line" line-num="492" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|netwk_eject$reset"stage_in_phases="2">$reset</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="493" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$bypassed_fifos_for_this_vc"stage_in_phases="2">$bypassed_fifos_for_this_vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="494" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_avail"stage_in_phases="2">$trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_valid"stage_in_phases="2">$trans_valid</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="495" source-line-num="234">                     <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="496" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;flit">&gt;flit</span></span>
<span class="line" line-num="497" source-line-num="234">                           <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_eject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_eject&gt;flit$ANY"stage_in_phases="2">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="498" source-line-num="234">               <span class="tlv_ident_comment">// Instantiate FIFO.  Output to stage (m4_out_at - 1) because bypass is m4_out_at.</span></span>
<span class="line" line-num="499" source-line-num="234">               <span class="tlv_ident_keyword1">\source ./m4/1c/pipeflow_tlv.m4 550   </span><span class="tlv_ident_comment">// Instantiated from ./m4/1c/pipeflow_tlv.m4, 855 as: m4_flop_fifo_v2(...)</span></span>
<span class="line" line-num="500" source-line-num="234">                  <span class="tlv_ident_comment">//|default</span></span>
<span class="line" line-num="501" source-line-num="234">                  <span class="tlv_ident_comment">//   @0</span></span>
<span class="line" line-num="502" source-line-num="234">                  <span class="tlv_ident_keyword1">\SV_plus</span></span>
<span class="line" line-num="503" source-line-num="234">                     <span class="tlv_ident_hdl_code">localparam bit [</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1:0] full_mark_5 = 6 - 1;</span></span>
<span class="line" line-num="504" source-line-num="234">               </span>
<span class="line" line-num="505" source-line-num="234">                  <span class="tlv_ident_comment">// FIFO Instantiation</span></span>
<span class="line" line-num="506" source-line-num="234">               </span>
<span class="line" line-num="507" source-line-num="234">                  <span class="tlv_ident_comment">// Hierarchy declarations</span></span>
<span class="line" line-num="508" source-line-num="234">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject">|netwk_eject</span></span>
<span class="line" line-num="509" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(6)-1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="510" source-line-num="234">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out">|tb_out</span></span>
<span class="line" line-num="511" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(6)-1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="512" source-line-num="234">               </span>
<span class="line" line-num="513" source-line-num="234">                  <span class="tlv_ident_comment">// Hierarchy</span></span>
<span class="line" line-num="514" source-line-num="234">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject">|netwk_eject</span></span>
<span class="line" line-num="515" source-line-num="234">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">@1</span></span>
<span class="line" line-num="516" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$out_blocked"stage_in_phases="2">$out_blocked</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@0">%-1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$blocked"stage_in_phases="0">$blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="517" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$blocked"stage_in_phases="2">$blocked</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$full"stage_in_phases="4">$full</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$out_blocked"stage_in_phases="2">$out_blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="518" source-line-num="234">                        <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$blocked"stage_in_phases="2">$blocked</span><span class="tlv_ident_hdl_code">)   </span><span class="tlv_ident_comment">// Not required to be consumed elsewhere.</span></span>
<span class="line" line-num="519" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$would_bypass"stage_in_phases="2">$would_bypass</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$empty"stage_in_phases="4">$empty</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="520" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$bypass"stage_in_phases="2">$bypass</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$would_bypass"stage_in_phases="2">$would_bypass</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$out_blocked"stage_in_phases="2">$out_blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="521" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$push"stage_in_phases="2">$push</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$bypass"stage_in_phases="2">$bypass</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="522" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$grow"stage_in_phases="2">$grow</span>   <span class="tlv_ident_hdl_code">=   </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp;   </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$out_blocked"stage_in_phases="2">$out_blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="523" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$shrink"stage_in_phases="2">$shrink</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_avail"stage_in_phases="2">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$out_blocked"stage_in_phases="2">$out_blocked</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$empty"stage_in_phases="4">$empty</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="524" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$valid_count"stage_in_phases="2">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">? '0</span></span>
<span class="line" line-num="525" source-line-num="234">                                                                    <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$valid_count"stage_in_phases="4">$valid_count</span> <span class="tlv_ident_hdl_code">+ (</span></span>
<span class="line" line-num="526" source-line-num="234">                                                                         <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$grow"stage_in_phases="2">$grow</span>   <span class="tlv_ident_hdl_code">? { {(</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1){1'b0}}, 1'b1} :</span></span>
<span class="line" line-num="527" source-line-num="234">                                                                         <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$shrink"stage_in_phases="2">$shrink</span> <span class="tlv_ident_hdl_code">? '1</span></span>
<span class="line" line-num="528" source-line-num="234">                                                                                 <span class="tlv_ident_hdl_code">: '0</span></span>
<span class="line" line-num="529" source-line-num="234">                                                                      <span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="530" source-line-num="234">                        <span class="tlv_ident_comment">// At least 2 valid entries.</span></span>
<span class="line" line-num="531" source-line-num="234">                        <span class="tlv_ident_comment">//$two_valid = | $ValidCount[m4_counter_width-1:1];</span></span>
<span class="line" line-num="532" source-line-num="234">                        <span class="tlv_ident_comment">// but logic depth minimized by taking advantage of prev count &gt;= 4.</span></span>
<span class="line" line-num="533" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$two_valid"stage_in_phases="2">$two_valid</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$valid_count"stage_in_phases="4">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$clog2((6)+1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">|| | </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$valid_count"stage_in_phases="2">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">2</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="534" source-line-num="234">                        <span class="tlv_ident_comment">// These are an optimization of the commented block below to operate on vectors, rather than bits.</span></span>
<span class="line" line-num="535" source-line-num="234">                        <span class="tlv_ident_comment">// TODO: Keep optimizing...</span></span>
<span class="line" line-num="536" source-line-num="234">                        <span class="tlv_ident_hdl_code">{</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_was_tail"stage_in_phases="2">$$prev_entry_was_tail</span><span class="tlv_ident_hdl_code">} = {</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">[4:0], </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">5</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span><span class="tlv_ident_hdl_code">} </span><span class="tlv_ident_comment">/* circular &lt;&lt; */</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="537" source-line-num="234">                        <span class="tlv_ident_hdl_code">{</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$push"stage_in_phases="2">$$push</span><span class="tlv_ident_hdl_code">} = {6{</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$push"stage_in_phases="2">$push</span><span class="tlv_ident_hdl_code">}} &amp; </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_was_tail"stage_in_phases="2">$prev_entry_was_tail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="538" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="539" source-line-num="234">                           <span class="tlv_ident_comment">// Replaced with optimized versions above:</span></span>
<span class="line" line-num="540" source-line-num="234">                           <span class="tlv_ident_comment">// $prev_entry_was_tail = &gt;entry[(entry+(m4_depth)-1)%(m4_depth)]%+1$reconstructed_is_tail;</span></span>
<span class="line" line-num="541" source-line-num="234">                           <span class="tlv_ident_comment">// $push = |m4_in_pipe$push &amp;&amp; $prev_entry_was_tail;</span></span>
<span class="line" line-num="542" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$valid"stage_in_phases="2">$valid</span> <span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$reconstructed_valid"stage_in_phases="4">$reconstructed_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@0">%-1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry$pop"stage_in_phases="0">$pop</span><span class="tlv_ident_hdl_code">) || </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$push"stage_in_phases="2">$push</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="543" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$is_tail"stage_in_phases="2">$is_tail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_was_tail"stage_in_phases="2">$prev_entry_was_tail</span>  <span class="tlv_ident_comment">// shift tail</span></span>
<span class="line" line-num="544" source-line-num="234">                                                              <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span><span class="tlv_ident_hdl_code">;  </span><span class="tlv_ident_comment">// retain tail</span></span>
<span class="line" line-num="545" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="2">$state</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">? 1'b0</span></span>
<span class="line" line-num="546" source-line-num="234">                                                      <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$valid"stage_in_phases="2">$valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! (</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$two_valid"stage_in_phases="2">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$is_tail"stage_in_phases="2">$is_tail</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="547" source-line-num="234">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">@2</span></span>
<span class="line" line-num="548" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$empty"stage_in_phases="4">$empty</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$valid_count"stage_in_phases="4">$valid_count</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">]</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="549" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$full"stage_in_phases="4">$full</span> <span class="tlv_ident_hdl_code">= (</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$valid_count"stage_in_phases="4">$valid_count</span> <span class="tlv_ident_hdl_code">== full_mark_5);  </span><span class="tlv_ident_comment">// Could optimize for power-of-two depth.</span></span>
<span class="line" line-num="550" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="551" source-line-num="234">                        <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">@2</span></span>
<span class="line" line-num="552" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(entry+(6)-1)%(6)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="4">$state</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="553" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$next_entry_state"stage_in_phases="4">$next_entry_state</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(entry+1)%(6)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="4">$state</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="554" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$reconstructed_is_tail"stage_in_phases="4">$reconstructed_is_tail</span> <span class="tlv_ident_hdl_code">= (  </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; (!</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="4">$state</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span><span class="tlv_ident_hdl_code">)) ||</span></span>
<span class="line" line-num="555" source-line-num="234">                                                    <span class="tlv_ident_hdl_code">(! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; (!</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$next_entry_state"stage_in_phases="4">$next_entry_state</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="4">$state</span><span class="tlv_ident_hdl_code">)) ||</span></span>
<span class="line" line-num="556" source-line-num="234">                                                    <span class="tlv_ident_hdl_code">(</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$empty"stage_in_phases="4">$empty</span> <span class="tlv_ident_hdl_code">&amp;&amp; (entry == 0));  </span><span class="tlv_ident_comment">// need a tail when empty for push</span></span>
<span class="line" line-num="557" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$is_head"stage_in_phases="4">$is_head</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="4">$state</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="558" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$reconstructed_valid"stage_in_phases="4">$reconstructed_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$state"stage_in_phases="4">$state</span> <span class="tlv_ident_hdl_code">|| (</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$two_valid"stage_in_phases="4">$two_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$prev_entry_state"stage_in_phases="4">$prev_entry_state</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="559" source-line-num="234">                  <span class="tlv_ident_comment">// Write data</span></span>
<span class="line" line-num="560" source-line-num="234">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject">|netwk_eject</span></span>
<span class="line" line-num="561" source-line-num="234">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">@1</span></span>
<span class="line" line-num="562" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="563" source-line-num="234">                           <span class="tlv_ident_comment">//?$push</span></span>
<span class="line" line-num="564" source-line-num="234">                           <span class="tlv_ident_comment">//   $aNY = |m4_in_pipe['']m4_trans_hier$ANY;</span></span>
<span class="line" line-num="565" source-line-num="234">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry&gt;flit">&gt;flit</span></span>
<span class="line" line-num="566" source-line-num="234">                              <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$push"stage_in_phases="2">$push</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry&gt;flit$ANY"stage_in_phases="4">$ANY</span> <span class="tlv_ident_comment">/* RETAIN */</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="567" source-line-num="234">                  <span class="tlv_ident_comment">// Read data</span></span>
<span class="line" line-num="568" source-line-num="234">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out">|tb_out</span></span>
<span class="line" line-num="569" source-line-num="234">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@0">@0</span></span>
<span class="line" line-num="570" source-line-num="234">                        <span class="tlv_ident_comment">//$pop  = ! &gt;m4_top|m4_in_pipe%m4_align(m4_in_at + 1, m4_out_at)$empty &amp;&amp; ! $blocked;</span></span>
<span class="line" line-num="571" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="572" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry$is_head"stage_in_phases="0">$is_head</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+2</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry$is_head"stage_in_phases="4">$is_head</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="573" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry$pop"stage_in_phases="0">$pop</span>  <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry$is_head"stage_in_phases="0">$is_head</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$blocked"stage_in_phases="0">$blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="574" source-line-num="234">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;read_masked">&gt;read_masked</span></span>
<span class="line" line-num="575" source-line-num="234">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;read_masked&gt;flit">&gt;flit</span></span>
<span class="line" line-num="576" source-line-num="234">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;read_masked&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry$is_head"stage_in_phases="0">$is_head</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+2</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;entry&gt;flit$ANY"stage_in_phases="4">$ANY</span> <span class="tlv_ident_comment">/* $aNY */ </span><span class="tlv_ident_hdl_code">: '0;</span></span>
<span class="line" line-num="577" source-line-num="234">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum">&gt;accum</span></span>
<span class="line" line-num="578" source-line-num="234">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum&gt;flit">&gt;flit</span></span>
<span class="line" line-num="579" source-line-num="234">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= ((entry == 0) ? '0 : </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(entry+(6)-1)%(6)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">) |</span></span>
<span class="line" line-num="580" source-line-num="234">                                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;read_masked"tlx_ref="">&gt;read_masked</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;read_masked&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;read_masked&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="581" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head">&gt;head</span></span>
<span class="line" line-num="582" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_avail"stage_in_phases="0">$trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="583" source-line-num="234">                           <span class="tlv_ident_when">?$trans_avail</span></span>
<span class="line" line-num="584" source-line-num="234">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head&gt;flit">&gt;flit</span></span>
<span class="line" line-num="585" source-line-num="234">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry"tlx_ref="">&gt;entry</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">(6)-1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;entry&gt;accum&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="586" source-line-num="234">               </span>
<span class="line" line-num="587" source-line-num="234">                  <span class="tlv_ident_comment">// Bypass</span></span>
<span class="line" line-num="588" source-line-num="234">                  <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out">|tb_out</span></span>
<span class="line" line-num="589" source-line-num="234">                     <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@0">@0</span></span>
<span class="line" line-num="590" source-line-num="234">                        <span class="tlv_ident_comment">// Available output.  Sometimes it's necessary to know what would be coming to determined</span></span>
<span class="line" line-num="591" source-line-num="234">                        <span class="tlv_ident_comment">// if it's blocked.  This can be used externally in that case.</span></span>
<span class="line" line-num="592" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head">&gt;fifo_head</span></span>
<span class="line" line-num="593" source-line-num="234">                           <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_avail"stage_in_phases="0">$trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="594" source-line-num="234">                           <span class="tlv_ident_when">?$trans_avail</span></span>
<span class="line" line-num="595" source-line-num="234">                              <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head&gt;flit">&gt;flit</span></span>
<span class="line" line-num="596" source-line-num="234">                                 <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$would_bypass"stage_in_phases="2">$would_bypass</span></span>
<span class="line" line-num="597" source-line-num="234">                                              <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">%+1</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject&gt;flit$ANY"stage_in_phases="2">$ANY</span></span>
<span class="line" line-num="598" source-line-num="234">                                              <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head"tlx_ref="">&gt;head</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;head&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="599" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$would_bypass"stage_in_phases="2">$would_bypass</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$trans_avail"stage_in_phases="2">$trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="600" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_valid"stage_in_phases="0">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$blocked"stage_in_phases="0">$blocked</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="601" source-line-num="234">                        <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="602" source-line-num="234">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;flit">&gt;flit</span></span>
<span class="line" line-num="603" source-line-num="234">                              <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head"tlx_ref="">&gt;fifo_head</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;fifo_head&gt;flit$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="604" source-line-num="234">               </span>
<span class="line" line-num="605" source-line-num="234">               </span>
<span class="line" line-num="606" source-line-num="234">               </span>
<span class="line" line-num="607" source-line-num="234">                  <span class="tlv_ident_comment">/* Alternate code for pointer indexing.  Replaces $ANY expression above.</span></span>
<span class="line" line-num="608" source-line-num="234">               </span>
<span class="line" line-num="609" source-line-num="234">                  <span class="tlv_ident_comment">// Hierarchy</span></span>
<span class="line" line-num="610" source-line-num="234">                  <span class="tlv_ident_comment">|netwk_eject</span></span>
<span class="line" line-num="611" source-line-num="234">                     <span class="tlv_ident_comment">&gt;entry2[(6)-1:0]</span></span>
<span class="line" line-num="612" source-line-num="234">               </span>
<span class="line" line-num="613" source-line-num="234">                  <span class="tlv_ident_comment">// Head/Tail ptrs.</span></span>
<span class="line" line-num="614" source-line-num="234">                  <span class="tlv_ident_comment">|netwk_eject</span></span>
<span class="line" line-num="615" source-line-num="234">                     <span class="tlv_ident_comment">@1</span></span>
<span class="line" line-num="616" source-line-num="234">                        <span class="tlv_ident_comment">%next$WrPtr[\$clog2(6)-1:0] =</span></span>
<span class="line" line-num="617" source-line-num="234">                            <span class="tlv_ident_comment">$reset       ? '0 :</span></span>
<span class="line" line-num="618" source-line-num="234">                            <span class="tlv_ident_comment">$trans_valid ? ($WrPtr == (6 - 1))</span></span>
<span class="line" line-num="619" source-line-num="234">                                             <span class="tlv_ident_comment">? '0</span></span>
<span class="line" line-num="620" source-line-num="234">                                             <span class="tlv_ident_comment">: $WrPtr + {{(\$clog2(6)-1){1'b0}}, 1'b1} :</span></span>
<span class="line" line-num="621" source-line-num="234">                                           <span class="tlv_ident_comment">$RETAIN;</span></span>
<span class="line" line-num="622" source-line-num="234">                  <span class="tlv_ident_comment">|tb_out</span></span>
<span class="line" line-num="623" source-line-num="234">                     <span class="tlv_ident_comment">@0</span></span>
<span class="line" line-num="624" source-line-num="234">                        <span class="tlv_ident_comment">%next$RdPtr[\$clog2(6)-1:0] =</span></span>
<span class="line" line-num="625" source-line-num="234">                            <span class="tlv_ident_comment">&gt;vc|netwk_eject%+1$reset</span></span>
<span class="line" line-num="626" source-line-num="234">                                         <span class="tlv_ident_comment">? '0 :</span></span>
<span class="line" line-num="627" source-line-num="234">                            <span class="tlv_ident_comment">$trans_valid ? ($RdPtr == (6 - 1))</span></span>
<span class="line" line-num="628" source-line-num="234">                                             <span class="tlv_ident_comment">? '0</span></span>
<span class="line" line-num="629" source-line-num="234">                                             <span class="tlv_ident_comment">: $RdPtr + {{(\$clog2(6)-1){1'b0}}, 1'b1} :</span></span>
<span class="line" line-num="630" source-line-num="234">                                           <span class="tlv_ident_comment">$RETAIN;</span></span>
<span class="line" line-num="631" source-line-num="234">                  <span class="tlv_ident_comment">// Write FIFO</span></span>
<span class="line" line-num="632" source-line-num="234">                  <span class="tlv_ident_comment">|netwk_eject</span></span>
<span class="line" line-num="633" source-line-num="234">                     <span class="tlv_ident_comment">@1</span></span>
<span class="line" line-num="634" source-line-num="234">                        <span class="tlv_ident_comment">$dummy = '0;</span></span>
<span class="line" line-num="635" source-line-num="234">                        <span class="tlv_ident_comment">?$trans_valid</span></span>
<span class="line" line-num="636" source-line-num="234">                           <span class="tlv_ident_comment">// This doesn't work because SV complains for FIFOs in replicated context that</span></span>
<span class="line" line-num="637" source-line-num="234">                           <span class="tlv_ident_comment">// there are multiple procedures that assign the signals.</span></span>
<span class="line" line-num="638" source-line-num="234">                           <span class="tlv_ident_comment">// Array writes can be done in an SV module.</span></span>
<span class="line" line-num="639" source-line-num="234">                           <span class="tlv_ident_comment">// The only long-term resolutions are support for module generation and use</span></span>
<span class="line" line-num="640" source-line-num="234">                           <span class="tlv_ident_comment">// signals declared within for loops with cross-hierarchy references in SV.</span></span>
<span class="line" line-num="641" source-line-num="234">                           <span class="tlv_ident_comment">// TODO: To make a simulation-efficient FIFO, use DesignWare.</span></span>
<span class="line" line-num="642" source-line-num="234">                           <span class="tlv_ident_comment">{&gt;entry2[$WrPtr]$$ANY} = $ANY;</span></span>
<span class="line" line-num="643" source-line-num="234">                  <span class="tlv_ident_comment">// Read FIFO</span></span>
<span class="line" line-num="644" source-line-num="234">                  <span class="tlv_ident_comment">|tb_out</span></span>
<span class="line" line-num="645" source-line-num="234">                     <span class="tlv_ident_comment">@0</span></span>
<span class="line" line-num="646" source-line-num="234">                        <span class="tlv_ident_comment">&gt;read2</span></span>
<span class="line" line-num="647" source-line-num="234">                           <span class="tlv_ident_comment">$trans_valid = |tb_out$trans_valid;</span></span>
<span class="line" line-num="648" source-line-num="234">                           <span class="tlv_ident_comment">?$trans_valid</span></span>
<span class="line" line-num="649" source-line-num="234">                              <span class="tlv_ident_comment">$ANY = &gt;vc|netwk_eject&gt;entry2[|tb_out$RdPtr]%+1$ANY;</span></span>
<span class="line" line-num="650" source-line-num="234">                           <span class="tlv_ident_comment">`BOGUS_USE($dummy)</span></span>
<span class="line" line-num="651" source-line-num="234">                        <span class="tlv_ident_comment">?$trans_valid</span></span>
<span class="line" line-num="652" source-line-num="234">                           <span class="tlv_ident_comment">$ANY = &gt;read2$ANY;</span></span>
<span class="line" line-num="653" source-line-num="234">                  <span class="tlv_ident_comment">*/</span></span>
<span class="line" line-num="654" source-line-num="234">               <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="655" source-line-num="234">         </span>
<span class="line" line-num="656" source-line-num="234">            <span class="tlv_ident_comment">// FIFO select.</span></span>
<span class="line" line-num="657" source-line-num="234">            <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="658" source-line-num="234">            <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="659" source-line-num="234">               <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out">|tb_out</span></span>
<span class="line" line-num="660" source-line-num="234">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@0">@0</span></span>
<span class="line" line-num="661" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$arbing"stage_in_phases="0">$arbing</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$has_credit"stage_in_phases="0">$has_credit</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="662" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;prio">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="663" source-line-num="234">                        <span class="tlv_ident_comment">// Decoded priority.</span></span>
<span class="line" line-num="664" source-line-num="234">                        <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@-2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;prio$Match"stage_in_phases="-2">$Match</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">prio == </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$Prio"stage_in_phases="0">$Prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="665" source-line-num="234">                     <span class="tlv_ident_comment">// Mask of same-prio VCs.</span></span>
<span class="line" line-num="666" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;other_vc">&gt;other_vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="667" source-line-num="234">                        <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@-2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;other_vc$SamePrio"stage_in_phases="-2">$SamePrio</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$Prio"stage_in_phases="0">$Prio</span> <span class="tlv_ident_hdl_code">== </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">other_vc</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$Prio"stage_in_phases="0">$Prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="668" source-line-num="234">                        <span class="tlv_ident_comment">// Select among same-prio VCs.</span></span>
<span class="line" line-num="669" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;other_vc$competing"stage_in_phases="0">$competing</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;other_vc$SamePrio"stage_in_phases="0">$SamePrio</span> <span class="tlv_ident_hdl_code">&amp;&amp; </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_sv_sig">#</span><span class="tlv_ident_hdl_code">other_vc</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$arbing"stage_in_phases="0">$arbing</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="670" source-line-num="234">                     <span class="tlv_ident_comment">// Select FIFO if selected within priority and this VC has the selected (max available) priority.</span></span>
<span class="line" line-num="671" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$fifo_sel"stage_in_phases="0">$fifo_sel</span> <span class="tlv_ident_hdl_code">= ((</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;other_vc"tlx_ref="">&gt;other_vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;other_vc$competing"stage_in_phases="0">$competing</span> <span class="tlv_ident_hdl_code">&amp; ~((1 &lt;&lt; vc) - 1)) == (1 &lt;&lt; vc)) &amp;&amp; | (</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;prio$Match"stage_in_phases="0">$Match</span> <span class="tlv_ident_hdl_code">&amp; </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out$sel"stage_in_phases="0">$sel</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="672" source-line-num="234">                        <span class="tlv_ident_comment">// TODO: Need to replace m4_am_max with round-robin within priority.</span></span>
<span class="line" line-num="673" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$blocked"stage_in_phases="0">$blocked</span> <span class="tlv_ident_hdl_code">= ! </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$fifo_sel"stage_in_phases="0">$fifo_sel</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="674" source-line-num="234">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@2">@1</span></span>
<span class="line" line-num="675" source-line-num="234">                     <span class="tlv_ident_comment">// Can bypass FIFOs?</span></span>
<span class="line" line-num="676" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$can_bypass_fifos_for_this_vc"stage_in_phases="2">$can_bypass_fifos_for_this_vc</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="677" source-line-num="234">                                                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject@4">%+1</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_eject$empty"stage_in_phases="4">$empty</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="678" source-line-num="234">                                                     <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$has_credit"stage_in_phases="2">$has_credit</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="679" source-line-num="234">         </span>
<span class="line" line-num="680" source-line-num="234">                     <span class="tlv_ident_comment">// Indicate output VC as per-VC FIFO output $trans_valid or could bypass in this VC.</span></span>
<span class="line" line-num="681" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$bypassed_fifos_for_this_vc"stage_in_phases="2">$bypassed_fifos_for_this_vc</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$can_bypass_fifos_for_this_vc"stage_in_phases="2">$can_bypass_fifos_for_this_vc</span> <span class="tlv_ident_hdl_code">&amp;&amp; ! </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$fifo_trans_avail"stage_in_phases="2">$fifo_trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="682" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$bypassed_fifos_for_this_vc"stage_in_phases="2">$bypassed_fifos_for_this_vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="683" source-line-num="234">                     <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$vc_trans_valid"stage_in_phases="2">$vc_trans_valid</span><span class="tlv_ident_hdl_code">)  </span><span class="tlv_ident_comment">// okay to not consume this</span></span>
<span class="line" line-num="684" source-line-num="234">            <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="685" source-line-num="234">               <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out">|tb_out</span></span>
<span class="line" line-num="686" source-line-num="234">                  <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out@0">@0</span></span>
<span class="line" line-num="687" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="688" source-line-num="234">                        <span class="tlv_ident_comment">// Trans available for this prio/VC?</span></span>
<span class="line" line-num="689" source-line-num="234">                        <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out&gt;vc$avail_within_prio"stage_in_phases="0">$avail_within_prio</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$trans_avail"stage_in_phases="0">$trans_avail</span> <span class="tlv_ident_hdl_code">&amp;&amp;</span></span>
<span class="line" line-num="690" source-line-num="234">                                             <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;prio$Match"stage_in_phases="0">$Match</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="691" source-line-num="234">                     <span class="tlv_ident_comment">// Is this priority available in FIFOs.</span></span>
<span class="line" line-num="692" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out$avail"stage_in_phases="0">$avail</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out&gt;vc$avail_within_prio"stage_in_phases="0">$avail_within_prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="693" source-line-num="234">                     <span class="tlv_ident_comment">// Select this priority if its the max available.</span></span>
<span class="line" line-num="694" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out$sel"stage_in_phases="0">$sel</span> <span class="tlv_ident_hdl_code">= ((</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;prio"tlx_ref="">&gt;prio</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;prio|tb_out$avail"stage_in_phases="0">$avail</span> <span class="tlv_ident_hdl_code">&amp; ~((1 &lt;&lt; prio) - 1)) == (1 &lt;&lt; prio));</span></span>
<span class="line" line-num="695" source-line-num="234">         </span>
<span class="line" line-num="696" source-line-num="234">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out">|tb_out</span></span>
<span class="line" line-num="697" source-line-num="234">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|tb_out@0">@0</span></span>
<span class="line" line-num="698" source-line-num="234">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$fifo_trans_avail"stage_in_phases="0">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$arbing"stage_in_phases="0">$arbing</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="699" source-line-num="234">                  <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out">&gt;fifos_out</span></span>
<span class="line" line-num="700" source-line-num="234">                     <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out$fifo_trans_avail"stage_in_phases="0">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$fifo_trans_avail"stage_in_phases="0">$fifo_trans_avail</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="701" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">3</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="702" source-line-num="234">                     <span class="tlv_ident_keyword1">\source ./m4/1c/rw_tlv.m4 279   </span><span class="tlv_ident_comment">// Instantiated from ./m4/1c/pipeflow_tlv.m4, 903 as: m4_select(...)</span></span>
<span class="line" line-num="703" source-line-num="234">                        </span>
<span class="line" line-num="704" source-line-num="234">                        <span class="tlv_ident_comment">// This is a suboptimal implementation for simulation.</span></span>
<span class="line" line-num="705" source-line-num="234">                        <span class="tlv_ident_comment">// It does AND/OR reduction.  It would be better in simulation to simply index the desired value,</span></span>
<span class="line" line-num="706" source-line-num="234">                        <span class="tlv_ident_comment">//   but this is not currently supported in SandPiper as it is not legal across generate loops.</span></span>
<span class="line" line-num="707" source-line-num="234">                        <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="708" source-line-num="234">                           <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum">&gt;accum</span></span>
<span class="line" line-num="709" source-line-num="234">                              <span class="tlv_ident_keyword1">\always_comb</span></span>
<span class="line" line-num="710" source-line-num="234">                                 <span class="tlv_ident_hdl_code">if (vc == </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$low(</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$fifo_sel"stage_in_phases="0">$fifo_sel</span><span class="tlv_ident_hdl_code">))</span></span>
<span class="line" line-num="711" source-line-num="234">                                    <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$fifo_sel"stage_in_phases="0">$fifo_sel</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">: '0;</span></span>
<span class="line" line-num="712" source-line-num="234">                                 <span class="tlv_ident_hdl_code">else</span></span>
<span class="line" line-num="713" source-line-num="234">                                    <span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$fifo_sel"stage_in_phases="0">$fifo_sel</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out&gt;flit$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">vc-1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="714" source-line-num="234">                                             </span>
<span class="line" line-num="715" source-line-num="234">                        <span class="tlv_ident_when">?$fifo_trans_avail</span></span>
<span class="line" line-num="716" source-line-num="234">                           <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out$ANY"stage_in_phases="0">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$high(</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$fifo_sel"stage_in_phases="0">$fifo_sel</span><span class="tlv_ident_hdl_code">)</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum"tlx_ref="">&gt;accum</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out&gt;vc&gt;accum$ANY"stage_in_phases="0">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="717" source-line-num="234">                                             <span class="tlv_ident_comment">/* Old way:</span></span>
<span class="line" line-num="718" source-line-num="234">                        <span class="tlv_ident_comment">\always_comb</span></span>
<span class="line" line-num="719" source-line-num="234">                           <span class="tlv_ident_comment">$$ANY = m4_init;</span></span>
<span class="line" line-num="720" source-line-num="234">                           <span class="tlv_ident_comment">for (int i = m4_MIN; i &lt;= m4_MAX; i++)</span></span>
<span class="line" line-num="721" source-line-num="234">                              <span class="tlv_ident_comment">$ANY = $ANY | (&gt;vc[i]m4_index_sig_match ? &gt;vc[i]$ANY : '0);</span></span>
<span class="line" line-num="722" source-line-num="234">                        <span class="tlv_ident_comment">*/</span></span>
<span class="line" line-num="723" source-line-num="234">                     <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="724" source-line-num="234">         </span>
<span class="line" line-num="725" source-line-num="234">                  <span class="tlv_ident_comment">// Output transaction</span></span>
<span class="line" line-num="726" source-line-num="234">                  <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="727" source-line-num="234">         </span>
<span class="line" line-num="728" source-line-num="234">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|tb_out@2">@1</span></span>
<span class="line" line-num="729" source-line-num="234">                  <span class="tlv_ident_comment">// Incorporate bypass</span></span>
<span class="line" line-num="730" source-line-num="234">                  <span class="tlv_ident_comment">// Bypass if there's no transaction from the FIFOs, and the incoming transaction is okay for output.</span></span>
<span class="line" line-num="731" source-line-num="234">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$can_bypass_fifos"stage_in_phases="2">$can_bypass_fifos</span> <span class="tlv_ident_hdl_code">= | </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$can_bypass_fifos_for_this_vc"stage_in_phases="2">$can_bypass_fifos_for_this_vc</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="732" source-line-num="234">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$fifo_trans_avail"stage_in_phases="2">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">|| </span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$can_bypass_fifos"stage_in_phases="2">$can_bypass_fifos</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="733" source-line-num="234">                  <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="734" source-line-num="234">                     <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit">&gt;flit</span></span>
<span class="line" line-num="735" source-line-num="234">                        <span class="tlv_ident_assigned_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$fifo_trans_avail"stage_in_phases="2">$fifo_trans_avail</span> <span class="tlv_ident_hdl_code">? </span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out"tlx_ref="">&gt;fifos_out</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|tb_out&gt;fifos_out$ANY"stage_in_phases="2">$ANY</span> <span class="tlv_ident_hdl_code">: </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|netwk_eject"tlx_ref="">|netwk_eject</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|netwk_eject&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|netwk_eject@2">%+0</span><span class="tlv_ident_sig_keyword" logical_entity="&gt;yy&gt;xx|netwk_eject&gt;flit$ANY"stage_in_phases="2">$ANY</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="736" source-line-num="234">         <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="737" source-line-num="235">         <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc">&gt;vc</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">*</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="738" source-line-num="236">            <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out">|tb_out</span></span>
<span class="line" line-num="739" source-line-num="237">               <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@0">@0</span></span>
<span class="line" line-num="740" source-line-num="238">                  <span class="tlv_ident_alignment_keyword_1c" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out@-2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$Prio"stage_in_phases="-2">$Prio</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx&gt;vc"tlx_ref="">&gt;vc</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject"tlx_ref="">|netwk_inject</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject@0">%+0</span><span class="tlv_ident_state_sig" logical_entity="&gt;yy&gt;xx&gt;vc|netwk_inject$Prio"stage_in_phases="0">$Prio</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="741" source-line-num="239">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="&gt;yy&gt;xx&gt;vc|tb_out$has_credit"stage_in_phases="0">$has_credit</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">RW_rand_vect[(230 + ((yy * xx) ^ ((3 * xx) + yy))) % 257 +: 1];</span></span>
<span class="line" line-num="742" source-line-num="240">         <span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out">|tb_out</span></span>
<span class="line" line-num="743" source-line-num="241">            <span class="tlv_ident_stage_expr" logical_entity="&gt;yy&gt;xx|tb_out@2">@1</span></span>
<span class="line" line-num="744" source-line-num="242">               <span class="tlv_ident_when">?$trans_valid</span></span>
<span class="line" line-num="745" source-line-num="243">                  <span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit">&gt;flit</span></span>
<span class="line" line-num="746" source-line-num="244">                     <span class="tlv_ident_hdl_code">`BOGUS_USE(</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$head"stage_in_phases="2">$head</span> <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$tail"stage_in_phases="2">$tail</span> <span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$data"stage_in_phases="2">$data</span><span class="tlv_ident_hdl_code">)</span></span>
<span class="line" line-num="747" source-line-num="245">               </span>
<span class="line" line-num="748" source-line-num="246">   <span class="tlv_ident_comment">//==========</span></span>
<span class="line" line-num="749" source-line-num="247">   <span class="tlv_ident_comment">// Testbench</span></span>
<span class="line" line-num="750" source-line-num="248">   <span class="tlv_ident_comment">//</span></span>
<span class="line" line-num="751" source-line-num="249">   <span class="tlv_ident_pipeline" logical_entity="|tb_gen">|tb_gen</span></span>
<span class="line" line-num="752" source-line-num="250">      </span>
<span class="line" line-num="753" source-line-num="251">      <span class="tlv_ident_stage_expr" logical_entity="|tb_gen@-2">@-1</span></span>
<span class="line" line-num="754" source-line-num="252">         <span class="tlv_ident_comment">// Free-running cycle count.</span></span>
<span class="line" line-num="755" source-line-num="253">         <span class="tlv_ident_alignment_keyword_1c" logical_entity="|tb_gen@-4">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="|tb_gen$CycCnt"stage_in_phases="-4">$CycCnt</span><span class="tlv_ident_state_sig">[</span><span class="tlv_ident_hdl_code">15</span><span class="tlv_ident_state_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_state_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|reset"tlx_ref="">|reset</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|reset@-2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="|reset$reset"stage_in_phases="-2">$reset</span> <span class="tlv_ident_hdl_code">? 16'b0 : </span><span class="tlv_ident_state_sig" logical_entity="|tb_gen$CycCnt"stage_in_phases="-2">$CycCnt</span> <span class="tlv_ident_hdl_code">+ 16'b1;</span></span>
<span class="line" line-num="756" source-line-num="254">      </span>
<span class="line" line-num="757" source-line-num="255">      <span class="tlv_ident_stage_expr" logical_entity="|tb_gen@2">@1</span></span>
<span class="line" line-num="758" source-line-num="256">         <span class="tlv_ident_beh_hier_1" logical_entity="|tb_gen&gt;yy">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="759" source-line-num="257">            <span class="tlv_ident_beh_hier_1" logical_entity="|tb_gen&gt;yy&gt;xx">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="760" source-line-num="258">               <span class="tlv_ident_comment">// Keep track of how many flits were injected.</span></span>
<span class="line" line-num="761" source-line-num="259">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_gen&gt;yy&gt;xx$inj_cnt"stage_in_phases="2">$inj_cnt</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen$trans_valid"stage_in_phases="2">$trans_valid</span> <span class="tlv_ident_hdl_code">? 1 : 0;</span></span>
<span class="line" line-num="762" source-line-num="260">            <span class="tlv_ident_keyword1">\source ./m4/1c/rw_tlv.m4 206   </span><span class="tlv_ident_comment">// Instantiated from stdin, 260 as: m4+redux($inj_row_sum[(1 + 1)-1:0], &gt;xx, 1, 0, $inj_cnt, '0, +)</span></span>
<span class="line" line-num="763" source-line-num="260">               <span class="tlv_ident_keyword1">\always_comb</span></span>
<span class="line" line-num="764" source-line-num="260">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_gen&gt;yy$inj_row_sum"stage_in_phases="2">$$inj_row_sum</span><span class="tlv_ident_assigned_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_assigned_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_assigned_pipe_sig">] </span><span class="tlv_ident_hdl_code">= '0;</span></span>
<span class="line" line-num="765" source-line-num="260">                  <span class="tlv_ident_hdl_code">for (int i = 0; i &lt;= 1; i++)</span></span>
<span class="line" line-num="766" source-line-num="260">                     <span class="tlv_ident_pipe_sig" logical_entity="|tb_gen&gt;yy$inj_row_sum"stage_in_phases="2">$inj_row_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_gen&gt;yy$inj_row_sum"stage_in_phases="2">$inj_row_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_beh_hier_1" logical_entity="|tb_gen&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">i</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="|tb_gen&gt;yy&gt;xx$inj_cnt"stage_in_phases="2">$inj_cnt</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="767" source-line-num="260">            <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="768" source-line-num="261">         <span class="tlv_ident_keyword1">\source ./m4/1c/rw_tlv.m4 206   </span><span class="tlv_ident_comment">// Instantiated from stdin, 261 as: m4+redux($inj_sum[(1 + 1)-1:0], &gt;yy, 1, 0, $inj_row_sum, '0, +)</span></span>
<span class="line" line-num="769" source-line-num="261">            <span class="tlv_ident_keyword1">\always_comb</span></span>
<span class="line" line-num="770" source-line-num="261">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_gen$inj_sum"stage_in_phases="2">$$inj_sum</span><span class="tlv_ident_assigned_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_assigned_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_assigned_pipe_sig">] </span><span class="tlv_ident_hdl_code">= '0;</span></span>
<span class="line" line-num="771" source-line-num="261">               <span class="tlv_ident_hdl_code">for (int i = 0; i &lt;= 1; i++)</span></span>
<span class="line" line-num="772" source-line-num="261">                  <span class="tlv_ident_pipe_sig" logical_entity="|tb_gen$inj_sum"stage_in_phases="2">$inj_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_gen$inj_sum"stage_in_phases="2">$inj_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_beh_hier_1" logical_entity="|tb_gen&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">i</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="|tb_gen&gt;yy$inj_row_sum"stage_in_phases="2">$inj_row_sum</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="773" source-line-num="261">         <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="774" source-line-num="262">      <span class="tlv_ident_stage_expr" logical_entity="|tb_gen@2">@1</span></span>
<span class="line" line-num="775" source-line-num="263">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_gen$inj_cnt"stage_in_phases="2">$inj_cnt</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|reset"tlx_ref="">|reset</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|reset@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="|reset$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">? '0 : </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_gen$inj_sum"stage_in_phases="2">$inj_sum</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="776" source-line-num="264">      </span>
<span class="line" line-num="777" source-line-num="265">   <span class="tlv_ident_pipeline" logical_entity="|tb_out">|tb_out</span></span>
<span class="line" line-num="778" source-line-num="266">        <span class="tlv_ident_comment">// Alignment below with |tb_gen.</span></span>
<span class="line" line-num="779" source-line-num="267"></span>
<span class="line" line-num="780" source-line-num="268">      <span class="tlv_ident_stage_expr" logical_entity="|tb_out@2">@1</span></span>
<span class="line" line-num="781" source-line-num="269">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_out$reset"stage_in_phases="2">$reset</span> <span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|reset"tlx_ref="">|reset</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|reset@2">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="|reset$reset"stage_in_phases="2">$reset</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="782" source-line-num="270">      <span class="tlv_ident_stage_expr" logical_entity="|tb_out@4">@2</span></span>
<span class="line" line-num="783" source-line-num="271">         <span class="tlv_ident_beh_hier_1" logical_entity="|tb_out&gt;yy">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="784" source-line-num="272">            <span class="tlv_ident_beh_hier_1" logical_entity="|tb_out&gt;yy&gt;xx">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span></span>
<span class="line" line-num="785" source-line-num="273">               <span class="tlv_ident_comment">// Keep track of how many flits came out.</span></span>
<span class="line" line-num="786" source-line-num="274">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_out&gt;yy&gt;xx$eject_cnt"stage_in_phases="4">$eject_cnt</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">1-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out$trans_valid"stage_in_phases="4">$trans_valid</span> <span class="tlv_ident_hdl_code">? 1 : 0;</span></span>
<span class="line" line-num="787" source-line-num="275">            <span class="tlv_ident_keyword1">\source ./m4/1c/rw_tlv.m4 206   </span><span class="tlv_ident_comment">// Instantiated from stdin, 275 as: m4+redux($eject_row_sum[(1 + 1)-1:0], &gt;xx, 1, 0, $eject_cnt, '0, +)</span></span>
<span class="line" line-num="788" source-line-num="275">               <span class="tlv_ident_keyword1">\always_comb</span></span>
<span class="line" line-num="789" source-line-num="275">                  <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_out&gt;yy$eject_row_sum"stage_in_phases="4">$$eject_row_sum</span><span class="tlv_ident_assigned_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_assigned_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_assigned_pipe_sig">] </span><span class="tlv_ident_hdl_code">= '0;</span></span>
<span class="line" line-num="790" source-line-num="275">                  <span class="tlv_ident_hdl_code">for (int i = 0; i &lt;= 1; i++)</span></span>
<span class="line" line-num="791" source-line-num="275">                     <span class="tlv_ident_pipe_sig" logical_entity="|tb_out&gt;yy$eject_row_sum"stage_in_phases="4">$eject_row_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out&gt;yy$eject_row_sum"stage_in_phases="4">$eject_row_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_beh_hier_1" logical_entity="|tb_out&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">i</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out&gt;yy&gt;xx$eject_cnt"stage_in_phases="4">$eject_cnt</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="792" source-line-num="275">            <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="793" source-line-num="276">         <span class="tlv_ident_keyword1">\source ./m4/1c/rw_tlv.m4 206   </span><span class="tlv_ident_comment">// Instantiated from stdin, 276 as: m4+redux($eject_sum[(1 + 1)-1:0], &gt;yy, 1, 0, $eject_row_sum, '0, +)</span></span>
<span class="line" line-num="794" source-line-num="276">            <span class="tlv_ident_keyword1">\always_comb</span></span>
<span class="line" line-num="795" source-line-num="276">               <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_out$eject_sum"stage_in_phases="4">$$eject_sum</span><span class="tlv_ident_assigned_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_assigned_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_assigned_pipe_sig">] </span><span class="tlv_ident_hdl_code">= '0;</span></span>
<span class="line" line-num="796" source-line-num="276">               <span class="tlv_ident_hdl_code">for (int i = 0; i &lt;= 1; i++)</span></span>
<span class="line" line-num="797" source-line-num="276">                  <span class="tlv_ident_pipe_sig" logical_entity="|tb_out$eject_sum"stage_in_phases="4">$eject_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out$eject_sum"stage_in_phases="4">$eject_sum</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_beh_hier_1" logical_entity="|tb_out&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">i</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out&gt;yy$eject_row_sum"stage_in_phases="4">$eject_row_sum</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="798" source-line-num="276">         <span class="tlv_ident_keyword1">\end_source</span></span>
<span class="line" line-num="799" source-line-num="277">         <span class="tlv_ident_assigned_pipe_sig" logical_entity="|tb_out$eject_cnt"stage_in_phases="4">$eject_cnt</span><span class="tlv_ident_pipe_sig">[</span><span class="tlv_ident_hdl_code">(1 + 1)-1</span><span class="tlv_ident_pipe_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_pipe_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out$reset"stage_in_phases="4">$reset</span> <span class="tlv_ident_hdl_code">? '0 : </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out$eject_sum"stage_in_phases="4">$eject_sum</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="800" source-line-num="278">         <span class="tlv_ident_alignment_keyword_1c" logical_entity="|tb_out@2">%next</span><span class="tlv_ident_assigned_state_sig" logical_entity="|tb_out$FlitsInFlight"stage_in_phases="2">$FlitsInFlight</span><span class="tlv_ident_state_sig">[</span><span class="tlv_ident_hdl_code">31</span><span class="tlv_ident_state_sig">:</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_state_sig">] </span><span class="tlv_ident_hdl_code">= </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out$reset"stage_in_phases="4">$reset</span> <span class="tlv_ident_hdl_code">? '0 : </span><span class="tlv_ident_state_sig" logical_entity="|tb_out$FlitsInFlight"stage_in_phases="4">$FlitsInFlight</span> <span class="tlv_ident_hdl_code">+ </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="|tb_gen$inj_cnt"stage_in_phases="4">$inj_cnt</span> <span class="tlv_ident_hdl_code">- </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out$eject_cnt"stage_in_phases="4">$eject_cnt</span><span class="tlv_ident_hdl_code">;</span></span>
<span class="line" line-num="801" source-line-num="279">         </span>
<span class="line" line-num="802" source-line-num="280">        <span class="tlv_ident_comment">// Refers to flit in tb_gen scope.</span></span>
<span class="line" line-num="803" source-line-num="281">        <span class="tlv_ident_comment">// Refers to flit in tb_out scope.</span></span>
<span class="line" line-num="804" source-line-num="282">      <span class="tlv_ident_stage_expr" logical_entity="|tb_out@4">@2</span></span>
<span class="line" line-num="805" source-line-num="283">         <span class="tlv_ident_keyword1">\SV_plus</span></span>
<span class="line" line-num="806" source-line-num="284">            <span class="tlv_ident_hdl_code">always_ff @(posedge clk) begin</span></span>
<span class="line" line-num="807" source-line-num="285">               <span class="tlv_ident_hdl_code">if (! </span><span class="tlv_ident_pipe_sig" logical_entity="|tb_out$reset"stage_in_phases="4">$reset</span><span class="tlv_ident_hdl_code">) begin</span></span>
<span class="line" line-num="808" source-line-num="286">                  <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;-In-        -Out-      (Cycle: </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%d, Inflight: </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%d)&quot;, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|tb_gen@4">%+0</span><span class="tlv_ident_state_sig" logical_entity="|tb_gen$CycCnt"stage_in_phases="4">$CycCnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_state_sig" logical_entity="|tb_out$FlitsInFlight"stage_in_phases="4">$FlitsInFlight</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="809" source-line-num="287">                  <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;/---+---</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\   /---+---</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\&quot;);</span></span>
<span class="line" line-num="810" source-line-num="288">                  <span class="tlv_ident_hdl_code">for(int y = 0; y &lt;= 1; y++) begin</span></span>
<span class="line" line-num="811" source-line-num="289">                     <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|   </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|&quot;, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x"stage_in_phases="4">$dest_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y"stage_in_phases="4">$dest_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_x"stage_in_phases="4">$dest_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$dest_y"stage_in_phases="4">$dest_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$dest_x"stage_in_phases="4">$dest_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$dest_y"stage_in_phases="4">$dest_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$dest_x"stage_in_phases="4">$dest_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$dest_y"stage_in_phases="4">$dest_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="812" source-line-num="290">                     <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|   </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|&quot;, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$src_x"stage_in_phases="4">$src_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$src_y"stage_in_phases="4">$src_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$src_x"stage_in_phases="4">$src_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$src_y"stage_in_phases="4">$src_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$src_x"stage_in_phases="4">$src_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$src_y"stage_in_phases="4">$src_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$src_x"stage_in_phases="4">$src_x</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$src_y"stage_in_phases="4">$src_y</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$vc"stage_in_phases="4">$vc</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="813" source-line-num="291">                     <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|%2h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|%2h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|   </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%2h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%2h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">%1h</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">|&quot;, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$pkt_cnt"stage_in_phases="4">$pkt_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$flit_cnt"stage_in_phases="4">$flit_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$pkt_cnt"stage_in_phases="4">$pkt_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_alignment_expr_1c" logical_entity="&gt;yy&gt;xx|tb_gen@4">%+0</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_gen&gt;flit$flit_cnt"stage_in_phases="4">$flit_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$pkt_cnt"stage_in_phases="4">$pkt_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">0</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$flit_cnt"stage_in_phases="4">$flit_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$pkt_cnt"stage_in_phases="4">$pkt_cnt</span><span class="tlv_ident_hdl_code">, </span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy"tlx_ref="">&gt;yy</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">y</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx"tlx_ref="">&gt;xx</span><span class="tlv_ident_beh_hier_1">[</span><span class="tlv_ident_hdl_code">1</span><span class="tlv_ident_beh_hier_1">]</span><span class="tlv_ident_pipeline" logical_entity="&gt;yy&gt;xx|tb_out"tlx_ref="">|tb_out</span><span class="tlv_ident_beh_hier_1" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit"tlx_ref="">&gt;flit</span><span class="tlv_ident_pipe_sig" logical_entity="&gt;yy&gt;xx|tb_out&gt;flit$flit_cnt"stage_in_phases="4">$flit_cnt</span><span class="tlv_ident_hdl_code">);</span></span>
<span class="line" line-num="814" source-line-num="292">                     <span class="tlv_ident_hdl_code">if (y &lt; 1) begin</span></span>
<span class="line" line-num="815" source-line-num="293">                        <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;+---+---+   +---+---+&quot;);</span></span>
<span class="line" line-num="816" source-line-num="294">                     <span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="817" source-line-num="295">                  <span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="818" source-line-num="296">                  <span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">$display(&quot;</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\---+---/   </span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\</span><span class="tlv_ident_sv_sig">\</span><span class="tlv_ident_hdl_code">\---+---/&quot;);</span></span>
<span class="line" line-num="819" source-line-num="297">               <span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="820" source-line-num="298">            <span class="tlv_ident_hdl_code">end</span></span>
<span class="line" line-num="821" source-line-num="299">      <span class="tlv_ident_stage_expr" logical_entity="|tb_out@4">@2</span></span>
<span class="line" line-num="822" source-line-num="300">         <span class="tlv_ident_comment">// Pass the test on cycle 20.</span></span>
<span class="line" line-num="823" source-line-num="301">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">failed = (</span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|tb_gen@4">%+0</span><span class="tlv_ident_state_sig" logical_entity="|tb_gen$CycCnt"stage_in_phases="4">$CycCnt</span> <span class="tlv_ident_hdl_code">&gt; 16'd200);</span></span>
<span class="line" line-num="824" source-line-num="302">         <span class="tlv_ident_sv_sig">*</span><span class="tlv_ident_hdl_code">passed = (</span><span class="tlv_ident_beh_hier_1" logical_entity=""tlx_ref="">&gt;top</span><span class="tlv_ident_pipeline" logical_entity="|tb_gen"tlx_ref="">|tb_gen</span><span class="tlv_ident_alignment_expr_1c" logical_entity="|tb_gen@4">%+0</span><span class="tlv_ident_state_sig" logical_entity="|tb_gen$CycCnt"stage_in_phases="4">$CycCnt</span> <span class="tlv_ident_hdl_code">&gt; 16'd20) &amp;&amp; (</span><span class="tlv_ident_state_sig" logical_entity="|tb_out$FlitsInFlight"stage_in_phases="4">$FlitsInFlight</span> <span class="tlv_ident_hdl_code">== '0);</span></span>
<span class="line" line-num="825" source-line-num="303"><span class="tlv_ident_keyword1">\SV</span></span>
<span class="line" line-num="826" source-line-num="304"><span class="tlv_ident_hdl_code">endmodule</span></span>

</pre>

</body>
</html>
